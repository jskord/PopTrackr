YUI.add("practice-Feedback",function(n){var t=n.namespace("IXL"),e=t.Intl.getModule("practice-Feedback"),s=t.CrateModel,i=t.CrateView,o=document.getElementById("bd"),a=null==o?0:o.getAttribute("data-subject"),d={0:"",1:"",2:"",3:"",4:".spanish"};function r(e,t){return e+d[t]}var l='<div class="answer-box"><h2 class="feedback-header">'+e.getText(r("sorry_incorrect",a))+'</h2><h3 class="answer-header correct-answer-hd">'+e.getText("correct_answer")+'</h3><div class="answer-box-bd"><div class="correct-answer yui3-correctanswer"></div></div><div class="next-problem"><button class="crisp-button got-it-top">'+e.getText("button.got_it")+'</button></div></div><h2 class="feedback-header">'+e.getText(r("explanation",a))+'</h2><div class="tab-box review-box"><div class="tab-box-hd"><h4 class="rot-neg-90">'+e.getText(r("review",a))+'</h4></div><div class="tab-box-bd"><div class="disabled-question"></div><h3 class="answer-header">'+e.getText("you_answered")+'</h3><div class="student-guess"></div><div class="optional-tab-box"><h3 class="answer-header take-a-closer-look">'+e.getText("take_closer_look")+'</h3><div class="closer-look"></div></div></div></div><div class="tab-box optional-tab-box remember-box"><div class="tab-box-hd"><h4 class="rot-neg-90">'+e.getText(r("remember",a))+'</h4></div><div class="tab-box-bd"><div class="exp-remember"></div></div></div><div class="tab-box optional-tab-box solve-box"><div class="tab-box-hd"><h4 class="rot-neg-90">'+e.getText(r("solve",a))+'</h4></div><div class="tab-box-bd"><div class="exp-solve"></div></div></div><div class="tab-box optional-tab-box wtkm-box"><div class="tab-box-hd"><h4>Explore</h4></div><div class="tab-box-bd"><div class="want-to-know-more"></div></div></div><div class="next-problem next-problem-footer"><button class="crisp-button got-it-bottom">'+e.getText("button.got_it")+"</button></div>";t.Feedback=n.Base.create("feedback",n.Widget,[n.WidgetChild,t.Focusable,t.LowerGradeFontSize],{initializer:function(e){this.correctAnswer=new s({cargoName:"answer"}),this.disabledQuestion=new s({cargoName:"disabledQuestion"}),this.studentGuess=new s({cargoName:"studentGuess"}),this.closerLook=new s({cargoName:"closerLook"}),this.expRemember=new s({cargoName:"remember"}),this.expSolve=new s({cargoName:"explanation"}),this.wantToKnowMore=new s({cargoName:"wantToKnowMore"}),this.models=[this.correctAnswer,this.disabledQuestion,this.studentGuess,this.closerLook,this.expRemember,this.expSolve,this.wantToKnowMore],this.publish("widget:rendered",{broadcast:0}),this._handles=[]},destructor:function(){this.correctAnswer.destroy(),this.disabledQuestion.destroy(),this.studentGuess.destroy(),this.closerLook.destroy(),this.expRemember.destroy(),this.expSolve.destroy(),this.wantToKnowMore.destroy()},load:function(t,s){var e=new n.Parallel;this.correctAnswer.load(t,e.add()),this.disabledQuestion.load(t,e.add()),this.studentGuess.load(t,e.add()),this.closerLook.load(t,e.add()),this.wantToKnowMore.load(t,e.add());var i=this.expRemember,o=this.expSolve;e.done(function(){n.later(100,this,function(){var e=new n.Parallel;i.load(t,e.add()),o.load(t,e.add()),e.done(s)})}),this.fire("evLoadExplanationFeedback",{data:t});var a=this.models.map(function(e){return e.get("cargoName")});return this.models.forEach(function(e){var t=e.get("cargoName");e.once("model:rendered",function(){a.splice(a.indexOf(t),1),0===a.length&&this.fire("widget:rendered")}.bind(this))}.bind(this)),n.when(this)},renderUI:function(){var e=this.get("contentBox");e.setHTML(l),new i({container:e.one(".correct-answer"),model:this.correctAnswer}),this._disabledQuestionView=new i({container:e.one(".disabled-question"),model:this.disabledQuestion}),new i({container:e.one(".student-guess"),model:this.studentGuess}),new i({container:e.one(".closer-look"),model:this.closerLook,plugins:[t.Plugin.EmptyTab]}),new i({container:e.one(".exp-remember"),model:this.expRemember,plugins:[t.Plugin.EmptyTab]}),new i({container:e.one(".exp-solve"),model:this.expSolve,plugins:[t.Plugin.EmptyTab]}),new i({container:e.one(".want-to-know-more"),model:this.wantToKnowMore,plugins:[t.Plugin.EmptyTab]})},bindUI:function(){var e=this.get("contentBox");this._handles.push(this.after("submit",this._nextProblem,this)),this._handles.push(this.after("button:enable",function(){e.all(".crisp-button").set("disabled",!1)})),this._handles.push(this.after("button:disable",function(){e.all(".crisp-button").set("disabled",!0)})),this._handles.push(this._disabledQuestionView.after("crateView:contentUpdate",function(){this.fire("widget:contentUpdate"),t.DelayedRendering.whenReady(this._disabledQuestionView.get("model").get("cargo")).then(function(){this.fire("widget:rendered")}.bind(this))}.bind(this))),this._handles.push(this.after("visibleChange",function(e){!1===e.newVal&&this.load({})})),this._handles.push(this.after("widget:contentUpdate",n.bind(this.fire,this,"button:enable")))},syncUI:function(){},readyToHide:function(){var t=this;return new n.Promise(function(e){t._handles.push(t.onceAfter("nextProblem",function(){e(!0)}))})},_nextProblem:function(e){if(this.get("visible")){if(e.type){var t="UNKNOWN";if("enter"===e.type)t="enter";else{var s=e.originalEvent.target;s.hasClass("got-it-top")?t="button-top":s.hasClass("got-it-bottom")&&(t="button-bottom")}n.io("/practice/trackNextQuestionMethod",{method:"POST",data:{method:t,pesId:this.get("pesId")}})}e.preventDefault(),this.fire("button:disable"),this.fire("nextProblem")}}},{ATTRS:{pesId:{added:!0}}})},"@VERSION@",{requires:["base","widget","widget-child","parallel","promise","practice-CrateModel","practice-CrateView","practice-EmptyTab","practice-Focusable","practice-LowerGradeFontSize","util-Intl"]});
YUI.add("practice-GCDisabler",function(e){var i=e.namespace("IXL"),r=require("ixl/content/util/GCDisabler");i.GCDisabler=r},"@VERSION@",{requires:["practice-css-GCDisabler","ixl_content_util_GCDisabler"]});
YUI.add("practice-MultipartIndicatorView",function(t){t.namespace("IXL").MultipartIndicatorView=t.Base.create("multipartIndicatorView",t.View,[],{render:function(){var t=this.get("container"),r=[],i=this.get("partNumber"),a=this.get("numParts");if(i&&a&&1<a){var e;for(e=0;e<i;e++)r.push('<div class="multipart-indicator multipart-indicator-progress"></div>');for(e=0;e<a-i;e++)r.push('<div class="multipart-indicator multipart-indicator-remaining"></div>')}return t.setHTML(r.join("")),this},updateAndRender:function(t){return t=t||{partNumber:null,numParts:null},this.setAttrs(t),this.render(),this}},{partNumber:{value:null},numParts:{value:null}})},"@VERSION@",{requires:["view"]});
YUI.add("practice-PracticeModel",function(a){var e=a.namespace("IXL"),r=e.RetryIO,u=a.JSON,l="question",s="practiceStats",t="practiceStats.score",o="questionKey",c="resultKey",m=12e3;e.PracticeModel=a.Base.create("practiceModel",a.Model,[],{pose:function(){var i=this;return new a.Promise(function(t,e){var n=i.get(l);null===n?r(i.get("poseUrl"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},data:u.stringify({questionKey:i.get(o)}),timeout:m,on:i._createHandlers(function(e){e.questionKey&&i.set(o,e.questionKey),t(e)},e)},3):t(n)})},tally:function(n,i,e){var l=this;return new a.Promise(function(t,e){r(l.get("tallyUrl"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},data:u.stringify({questionKey:l.get(o),offsetMillis:i,guesses:n}),timeout:m,on:l._createHandlers(function(e){l.set(c,e.questionKey),l.set(s,e.practiceStats),l.set("stageStats",e.nextStageStats),t(e)},e)},3)})},skipAndPose:function(){var i=this;return new a.Promise(function(t,e){var n=i.get(l);null===n?r(i.get("skipAndPoseUrl"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},data:u.stringify({questionKey:i.get(o)}),timeout:m,on:i._createHandlers(function(e){e&&e.questionKey&&(i.set(o,e.questionKey),i.set(s,e.practiceStats)),t(e)},e)},3):t(n)})},cease:function(){var t=this;return new a.Promise(function(n,e){r(t.get("ceaseUrl"),{data:{questionKey:t.get(c)},on:{success:function(e,t){n()},failure:function(){e()}}})})},summary:function(n){var i=this;return new a.Promise(function(e,t){r(i.get("summaryUrl"),{data:n,timeout:m,on:i._createHandlers(e,t)},3)})},recommend:function(){var n=this;return new a.Promise(function(e,t){r(n.get("recommendUrl"),{timeout:m,on:n._createHandlers(e,t)})})},cutoff:function(){var i=this;return new a.Promise(function(e,t){var n=i.get("cutoff");null===n?r(i.get("cutoffUrl"),{timeout:m,on:i._createHandlers(e,t)},3):e(n)})},sample:function(){var n=this;return new a.Promise(function(t,e){r(n.get("sampleUrl"),{timeout:m,on:n._createHandlers(function(e){t(e)},e)},3)})},logSampleClick:function(){this.get("sampleLogged")||(r(this.get("logSampleClickUrl"),{method:"POST"},3),this.set("sampleLogged",!0))},getScore:function(e){return function(){if(0!=e.get("practiceStats.problemsAttempted"))return e.get(t)}},isMastered:function(){return"MASTERY_SUMMARY"===this.get("nextState")||"NON_MASTERY_SUMMARY"===this.get("nextState")||100<=this.get(t)},shouldShowChallenge:function(){return-1!==["BEGIN_STAGE","BEGIN_BONUS"].indexOf(this.get("nextState"))},isSampleAvailableCurrently:function(){return this.get("sampleAvailableInitially")&&0===this.get("practiceStats.problemsAttempted")},_createHandlers:function(i,l){var a=this;return{success:function(e,t){205===t.status&&window.location.reload(!0);try{var n=u.parse(t.responseText);i(n)}catch(e){l(),a.fire("practiceIOFailure",{xhr:t})}},failure:function(e,t){l(),a.fire("practiceIOFailure",{xhr:t})}}}},{ATTRS:{questionKey:{value:null},resultKey:{value:null},poseUrl:{value:null,writeOnce:"initOnly"},tallyUrl:{value:null,writeOnce:"initOnly"},skipAndPoseUrl:{value:null,writeOnce:"initOnly"},canSkipSteps:{value:null,writeOnce:"initOnly"},ceaseUrl:{value:null,writeOnce:"initOnly"},summaryUrl:{value:null,writeOnce:"initOnly"},cutoffUrl:{value:null,writeOnce:"initOnly"},recommendUrl:{value:null,writeOnce:"initOnly"},sampleUrl:{value:null,writeOnce:"initOnly"},sampleAvailableInitially:{value:!1,writeOnce:"initOnly"},exampleQuestionBtnImgPath:{value:null,writeOnce:"initOnly"},backToPracticeBtnImgPath:{value:null,writeOnce:"initOnly"},sampleLogged:{value:!1},question:{value:null},cutoff:{value:null},practiceStats:{problemsAttempted:{value:null},score:{value:null},highScore:{value:null}},nextState:{getter:function(){return this.get("stageStats.state")}},audioEnabled:{value:!1},shownMoveOn:{value:!1},showRecommendations:{value:null},recommendations:{value:null}}})},"@VERSION@",{requires:["model","json","promise","util-RetryIO"]});
YUI.add("practice-PracticeStats",function(o){var e=o.namespace("IXL"),t=require("ixl/content/util/debounce"),i=o.Lang.isNumber,n=o.Lang.isBoolean;o.UA.ie&&o.UA.ie;function r(e,t){e&&e.setHTML(t)}var s=["problemsAttempted","score","numRibbons","in90Zone"];e.PracticeStats=o.Base.create("practiceStats",o.Widget,[],{initializer:function(e){this.after("highScoreChange",function(e){this._updateNumRibbons(e.newVal)}),this.score=this.get("score")||0,this._updateNumRibbons(this.get("highScore")),this._expectedScoreContent=[],this.verifyIntegrity=t(this.verifyIntegrity.bind(this),200,!1),window.MutationObserver?(this.observer=new MutationObserver(function(e){e.some(function(e){return"characterData"===e.type||"childList"===e.type&&0!==e.addedNodes.length})&&this.verifyIntegrity()}.bind(this)),this.observer.observe(o.one("#score-container").getDOMNode(),{childList:!0,subtree:!0,characterData:!0})):(this.targetNode=o.one("#score-container").getDOMNode(),this.targetNode.addEventListener("DOMNodeInserted",this.verifyIntegrity))},destructor:function(){this.observer&&this.observer.disconnect(),this.targetNode&&this.targetNode.removeEventListener("DOMNodeInserted",this.verifyIntegrity)},_verifyChildrenIntegrity:function(){var e=o.one("#score"),t=e.getDOMNode(),i=t.children;if(!(i.length===this._expectedScoreContent.length)){for(;0<i.length;)e.removeChild(i[0]);var n=document.createDocumentFragment();this._expectedScoreContent.forEach(function(e){n.appendChild(e.getDOMNode())}),e.appendChild(n)}Array.from(t.childNodes).forEach(function(e){e.nodeType===Node.TEXT_NODE&&0!==e.nodeValue.trim().length&&(e.nodeValue="")});for(var r=0;r<i.length;r++)i[r]!==this._expectedScoreContent[r].getDOMNode()&&e.replaceChild(this._expectedScoreContent[r],i[r])},_verifySmartScoreIntegrity:function(){var e=this.get("score"),t=this.scoreContainer.getDOMNode(),i=/^[0-9]+$/.test(t.innerText);(i=i&&parseInt(t.innerText,10)===e)||this._uiSetScore(e)},_verifyRibbonsIntegrity:function(){var e=this.ribbonsContainer.getElementsByTagName("*").getDOMNodes().length,t=this.calculateNumRibbons(this.get("highScore"));e===t||this._uiSetNumRibbons(t)},_verifyMedalsIntegrity:function(){this.medalsContainer.getDOMNode().innerHTML.trim()===this._medalsContent||this.medalsContainer.setContent(this._medalsContent)},verifyIntegrity:function(){this._verifyChildrenIntegrity(),this._verifySmartScoreIntegrity(),this._verifyRibbonsIntegrity(),this._verifyMedalsIntegrity()},calculateNumRibbons:function(e){return 90<=e?3:80<=e?2:70<=e?1:0},renderUI:function(){this.problemsAttemptedContainer=o.one("#problems-attempted"),this.scoreContainer=o.one("#currentscore"),this.ribbonsContainer=o.one("#ribbons"),this.medalsContainer=o.one("#medals"),this._medalsContent=this.medalsContainer.getDOMNode().innerHTML.trim(),this._expectedScoreContent=[this.scoreContainer,this.ribbonsContainer,this.medalsContainer];var e=o.one(".teacher-not-recorded");e&&this._expectedScoreContent.push(e)},bindUI:function(){this._bindAttrUI(s),this.after("scoreChange",this._growScore)},syncUI:function(){this._syncAttrUI(s)},_growScore:function(e){e.newVal>e.prevVal&&this._runScoreAnimation(),100<=e.newVal?(this.scoreContainer.addClass("max-score"),this.ribbonsContainer.addClass("max-score")):(this.scoreContainer.removeClass("max-score"),this.ribbonsContainer.removeClass("max-score"))},_runScoreAnimation:function(){this.scoreContainer.removeClass("grow-score"),this.scoreContainer.get("offsetHeight"),this.scoreContainer.addClass("grow-score")},_updateNumRibbons:function(e){this.set("numRibbons",this.calculateNumRibbons(e))},_uiSetProblemsAttempted:function(e){r(this.problemsAttemptedContainer,e)},_uiSetScore:function(e){r(this.scoreContainer,e)},_uiSetNumRibbons:function(e){var t=this.ribbonsContainer,i="";if(0<e){for(var n=1;n<e;n++)i+='<img src="/img/spacer.gif" alt="" title="" class="ribbon ribbon'+n+'"/>';i+='<img src="/static/math/practice/images/ribbon_'+e+".gif?r="+Math.floor(Math.pow(10,10)*Math.random())+'" alt="" title="" class="ribbon ribbon'+e+' animate-ribbon"/>',t.addClass("show-ribbons")}else t.removeClass("show-ribbons");t.setHTML(i)},_uiSetIn90Zone:function(e){this.scoreContainer.toggleClass("challenge-zone",!!e)}},{ATTRS:{in90Zone:{value:!1,validator:n},problemsAttempted:{value:0,validator:i},score:{value:0,validator:i},highScore:{value:0,validator:i},numRibbons:{value:0,validator:i}}})},"@VERSION@",{requires:["base","widget","datatype-number-format"]});
YUI.add('lang/practice-QuestionWidget', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['submit'] = 'Submit';
  IXL.Intl.addModule('practice-QuestionWidget', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("practice-AudioManager",function(l){var s=l.namespace("IXL"),e=require("ixl/content/util/AudioEventManager"),i=require("ixl/content/util/get-document");s.AudioManager=l.Base.create("audioManager",l.Base,[],{_playing:null,_startCallback:null,_stopCallback:null,_forcedStop:null,initializer:function(){var t=this.get("backend");t.on("started",this._handleStarted,this),t.on("ended",this._handleEnded,this),l.on("mobileClientDidStop",function(){this.stop()},this)},_resetState:function(){this._playing=null,this._playlist=[],this._forcedStop=null},toggleSoundPlaylist:function(t,e){var i=this._playing===e||this._playlist&&this._playlist.some(function(t){return e===t.id}),a=this;if(this.stop(),i)return this._playing=null,void(this._playlist=[]);this._playlist=t,this.get("backend").setUpPlaylist(t.map(function(t){return a._createAudioSources(t)})),this._isFirst=!0,this._playNextFromPlaylist()},_playNextFromPlaylist:function(){clearTimeout(this._playTimeout),this._forcedStop=!1;var e=this;if(e._playlist&&0!==e._playlist.length)var t=e._playlist[0].delayBefore;var i=function(){if(e._playlist&&0!==e._playlist.length&&!e._playing){var t=e._playlist.shift();e._prepareToPlayObject(t),0<t.loadingDelay&&"html5Audio"===e.get("backend").name?setTimeout(function(){isNaN(e.get("backend")._nodePlaylist[0]._node.duration)?(t.load(!0,!0),setTimeout(function(){e.get("backend").playNextFromPlaylist()},t.loadingDelay)):e.get("backend").playNextFromPlaylist()},10):e.get("backend").playNextFromPlaylist()}};t?this._playTimeout=setTimeout(i,t):i()},_prepareToPlayObject:function(t){t.load&&t.load(this._isFirst,"html5Audio"!==this.get("backend").name),this._isFirst=!1,this._startCallback=t.start||function(){},this._stopCallback=t.stop||function(){},this._playing=t.id},_createAudioSources:function(t){if(t.audioPaths)return this._createRecordedAudioSources(t.audioPaths);var e={languageCode:t.language,countryCode:t.country,gradeLevel:t.gradeLevel,rawText:t.text,generatorCode:t.generatorCode,timestamp:t.timestamp};return[{url:this._createURL(e,"mp3"),type:"audio/mpeg"},{url:this._createURL(e,"ogg"),type:"audio/ogg"}]},_createRecordedAudioSources:function(t){var e=[],i=decodeURI(t);try{t=JSON.parse(i)}catch(t){throw new Error(JSON.stringify({message:"IXL.AudioManager#_createRecordedAudioSources: "+t,data:i}))}return l.UA.androidapp||e.push({url:t.OPUS,type:'audio/ogg; codecs="opus"'}),e.push({url:t.AAC,type:"audio/mp4"}),e},stop:function(t){this._playing?(this._forcedStop=!0,this.get("backend").stop(),this._forcedStop=!1):(this._playlist&&0<this._playlist.length&&this._playlist[0].stop(!0,!1),this._playlist=null),t||i().dispatchEvent(e.createStopEvent()),clearTimeout(this._playTimeout),this._playTimeout=null},_createURL:function(t,e){var i=t.gradeLevel;""===i&&(i="B");var a=t.languageCode+"_"+t.countryCode;return"/practice/audio/"+s.AudioManager.version+"/"+t.timestamp+"/"+a+"/"+i+"/"+e+"/"+(t.generatorCode?t.generatorCode+"/":"")+"?"+l.QueryString.stringify({rawText:t.rawText})},_handleStarted:function(){if(this._startCallback){var t=this._startCallback;this._startCallback=null,t()}},_handleEnded:function(){this._playing=null;var t=this._stopCallback;this._stopCallback=null,this._forcedStop?this._resetState():this._playlist&&0<this._playlist.length?this._playNextFromPlaylist():(clearTimeout(this._playTimeout),this._playTimeout=null),t&&t(this._forcedStop,0===this._playlist.length)}},{ATTRS:{backend:{value:null}}}),s.AudioManager.version="nocache"},"@VERSION@",{requires:["ixl_content_util_AudioEventManager","base","querystring"]});
YUI.add("practice-AudioManagerInitializerUtils",function(i){var n,r=i.namespace("IXL");r.AudioManagerInitializerUtils={getAudioManager:function(){if(n)return n;var a=i.Array.find(this.getAudioBackends(),this._filterBackend,this),e=a&&new r.AudioManager({backend:new a});return n=e},saveAudioManager:function(a){n=a},_filterBackend:function(a){return a.canPlay()}}},"@VERSION@",{requires:["array-extras","practice-AudioManager"]});
YUI.add("practice-QuestionWidget",function(s){var e=s.namespace("IXL"),t=e.Intl.getModule("practice-QuestionWidget"),i=require("ixl/content/util/debounce"),n=require("ixl/content/util/fillIn/FillInNavigationController"),o=require("ixl/content/util/is-mobile-device"),a=require("ixl/content/util/fire-custom-event"),c=require("ixl/content/util/AutoFocusVersion");e.QuestionWidget=s.Base.create("questionWidget",e.CrateWidget,[s.WidgetChild,e.Focusable],{initializer:function(t){var i=this.get("view");this.addAttr("questionKey",{readOnly:!0,getter:function(t,e){return i.get("model").get("questionKey")}}),this.addAttr("component",{readOnly:!0,getter:function(t,e){return i.get("component")}}),this.publish("question:confirm",{emitFacade:!0}),this.publish("question:focus",{emitFacade:!0,broadcast:2}),this.useNewExplanationFlow=t.useNewExplanationFlow,this.useTPSS=t.useTPSS,this.submitHandles=[],n.initialize({}),this._handles=[]},renderUI:function(){this.set("footerContent",['<button class="crisp-button'+(o?" mobile-button":"")+'">',t.getText("submit"),"</button>"].join("")),this._toggleContentLoading(!0)},bindUI:function(){var t=this.get("contentBox");this._handles.push(this.on("submit",i(this._checkAnswer,750,!0),this)),this._handles.push(this.on("requestSkipStep",i(this._skipStep,750,!0),this)),this._handles.push(this.after("button:enable",function(){t.all(".crisp-button").set("disabled",!1).each(function(t){t.blur()})})),this._handles.push(this.after("button:disable",function(){t.all(".crisp-button").set("disabled",!0)})),this._handles.push(this.on("visibleChange",function(t){!1===t.newVal&&this._tryToBlurActiveElement()})),this._handles.push(this.after("visibleChange",function(t){!0===t.newVal&&this._doAutoFocus()},this)),this._handles.push(this.on("widget:rendered",s.bind(this._toggleContentLoading,this,!1))),this._handles.push(this.after("widget:rendered",s.bind(this._contentReady,this))),this._handles.push(this.after("checkAnswer",s.bind(this.disableQuestion,this)))},reenableContent:function(){this._contentReady()},_tryToBlurActiveElement:function(){try{var t=s.one(s.config.doc.activeElement);"INPUT"===t.get("tagName")&&t.blur()}catch(t){}},_detachSubmitHandles:function(){s.Array.invoke(this.submitHandles,"detach"),this.submitHandles.length=0},prepareQuestionSkipPromise:function(){var n=this;return new s.Promise(function(e,t){var i=n.onceAfter("doSkipStep",function(t){n._detachSubmitHandles(),e()});n.submitHandles.push(i)})},getGuessMap:function(t){var n=this;return new s.Promise(function(e,t){var i=n.onceAfter("checkAnswer",function(t){n.get("component").getGuessMap(function(t){n._detachSubmitHandles(),e({guessMap:t})})});n.submitHandles.push(i)})},_toggleContentLoading:function(t){var e=t?"addClass":"removeClass";this.get("boundingBox")[e]("question-content-loading")},_contentReady:function(){this.reenableQuestion(!1),this.fire("button:enable"),this.get("visible")&&this._doAutoFocus()},_doAutoFocus:function(){o||(this.get("component").get("context").autoFocusVersion!==c.QG3AutoFocusVersion&&this.fire("question:focus"),n.autoFocusFirstFillIn())},_confirm:function(t){t=t||{};var e=this.get("component");if(e.isGuessed())this.fire("checkAnswer",t);else{e.stabilize();var i=e.getAnswerAction(),n=this.get("view").get("model").get("cargo").get("context");this.fire("question:confirm",{answeraction:i,confirmed:s.bind(this.fire,this,"checkAnswer"),denied:s.bind(this._contentReady,this),context:n})}},_checkAnswer:function(t,e){e=e||{};this.get("visible")&&(t&&t.originalEvent&&t.originalEvent.preventDefault(),this.get("disabled")||(this._tryToBlurActiveElement(),this._confirm(e)))},_skipStep:function(t){this.get("visible")&&(t&&t.originalEvent&&t.originalEvent.preventDefault(),this.get("disabled")||(this._tryToBlurActiveElement(),this.fire("doSkipStep")))},disableQuestion:function(){this.useNewExplanationFlow&&(e.GCDisabler.disableTheGCs(this.get("contentBox").one(".ixl-practice-crate")),e.AudioManagerInitializerUtils.getAudioManager().stop())},reenableQuestion:function(t){this.useNewExplanationFlow&&(e.GCDisabler.reenableTheGCs(this.get("contentBox").one(".ixl-practice-crate"),t),a("ASADataMapReceived",null,this.get("contentBox").one(".ixl-practice-crate")._node))},makeQuestionAppearDisabled:function(t){this.useNewExplanationFlow&&e.GCDisabler.makeGCsAppearDisabled(this.get("contentBox").one(".ixl-practice-crate"),t)},addStudentAnswerAnnotations:function(t){this.useNewExplanationFlow&&a("ASADataMapReceived",t,this.get("contentBox").one(".ixl-practice-crate")._node)},tpssContentTransition:function(){this.useNewExplanationFlow&&this.useTPSS&&a("TPSSContentTransition",null,this.get("contentBox").one(".ixl-practice-crate")._node)},_detach:function(t){t&&t.detach()}},{ATTRS:{disabled:{value:!1,validator:s.Lang.isBoolean}}})},"@VERSION@",{requires:["base","widget","widget-child","event-key","practice-CrateWidget","practice-Focusable","practice-GCDisabler","practice-AudioManagerInitializerUtils","util-Intl"]});
YUI.add('lang/practice-SampleFeedback', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['solution'] = 'solution';
  text['example'] = 'Example';
  text['question'] = 'question';
  text['question.spanish'] = 'pregunta';
  text['example.spanish'] = 'Ejemplo';
  text['key_idea.spanish'] = 'idea clave';
  text['key_idea'] = 'key idea';
  text['solution.spanish'] = 'solución';
  IXL.Intl.addModule('practice-SampleFeedback', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("practice-SampleFeedback",function(s){var t=s.namespace("IXL"),i=t.Intl.getModule("practice-SampleFeedback"),a=t.CrateModel,o=t.CrateView,e=document.getElementById("bd"),n=null==e?0:e.getAttribute("data-subject"),d={0:"",1:"",2:"",3:"",4:".spanish"};function c(e,t){return e+d[t]}t.SampleFeedback=s.Base.create("sampleFeedback",s.Widget,[s.WidgetChild,t.Focusable],{initializer:function(e){this.disabledQuestion=new a({cargoName:"disabledQuestion"}),this.expRemember=new a({cargoName:"remember"}),this.expSolve=new a({cargoName:"explanation"}),this.models=[this.disabledQuestion,this.expRemember,this.expSolve],this.backToPracticeButton=new t.BackToPracticeButton({visible:!0,extraClassName:"footer",imgPath:this.get("btnImgPath")})},destructor:function(){this.disabledQuestion.destroy(),this.expRemember.destroy(),this.expSolve.destroy()},load:function(t,i){var a=this.expRemember,o=this.expSolve;return this.disabledQuestion.load(t,function(){s.later(100,this,function(){var e=new s.Parallel;a.load(t,e.add()),o.load(t,e.add()),e.done(i)})}),s.when(this)},renderUI:function(){var e=this.get("contentBox");e.setHTML((this.get("btnImgPath"),'<h2 class="feedback-header">'+i.getText(c("example",n))+'</h2><div class="tab-box review-box"><div class="tab-box-hd"><h4 class="rot-neg-90">'+i.getText(c("question",n))+'</h4></div><div class="tab-box-bd"><div class="disabled-question"></div></div></div><div class="tab-box optional-tab-box remember-box"><div class="tab-box-hd"><h4 class="rot-neg-90">'+i.getText(c("key_idea",n))+'</h4></div><div class="tab-box-bd"><div class="exp-remember"></div></div></div><div class="tab-box optional-tab-box solve-box"><div class="tab-box-hd"><h4 class="rot-neg-90">'+i.getText(c("solution",n))+'</h4></div><div class="tab-box-bd"><div class="exp-solve"></div></div></div>')),this.backToPracticeButton.render(e),new o({container:e.one(".disabled-question"),model:this.disabledQuestion}),new o({container:e.one(".exp-remember"),model:this.expRemember,plugins:[t.Plugin.EmptyTab]}),new o({container:e.one(".exp-solve"),model:this.expSolve,plugins:[t.Plugin.EmptyTab]})},bindUI:function(){var t=this;this.backToPracticeButton.on("hideExampleView",function(e){t.fire("hideExampleView")}),this.backToPracticeButton.on("showQuestionView",function(e){t.fire("showQuestionView")})},syncUI:function(){},unload:function(){this.load({})}},{ATTRS:{btnImgPath:""}})},"@VERSION@",{requires:["base","widget","widget-child","parallel","promise","practice-CrateModel","practice-CrateView","practice-EmptyTab","practice-Focusable","practice-BackToPracticeButton","util-Intl"]});
YUI.add("practice-SkillStepSkipMessage",function(s){var e=s.namespace("IXL"),i=["skillStepSkipMessage"];e.SkillStepSkipMessage=s.Base.create("skillStepSkipMessage",s.Widget,[s.WidgetChild],{load:function(){return s.when(this)},readyToHide:function(t){t=t||{};return s.Promise(function(e,i){s.later(1e3,this,function(){e(t.shouldWaitUntilNextWidgetReady)})})},renderUI:function(){this._skillStepSkipMessage=this.get("contentBox").appendChild("<h4></h4>")},bindUI:function(){this._bindAttrUI(i)},syncUI:function(){this._syncAttrUI(i)},_uiSetSkillStepSkipMessage:function(e){this._skillStepSkipMessage.setHTML(e)}},{ATTRS:{skillStepSkipMessage:{value:null}}})},"@VERSION@",{requires:["widget","widget-child","promise"]});
YUI.add('lang/practice-StageStats', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['template'] = 'Stage {stageNumber} of {numStages}';
  text['bonus_stage'] = 'Bonus stage';
  IXL.Intl.addModule('practice-StageStats', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("practice-StageStats",function(t){var e=t.namespace("IXL"),a=e.Intl.getModule("practice-StageStats");e.StageStats=t.Base.create("stageStats",t.Widget,[],{renderUI:function(){this.container=t.one("#score-stats-container")},updatePrev:function(t){},updateNext:function(t){},updateStageText:function(t){this.container.one(".sub-header").setHTML(this._getStageText(t)),this.container.one(".challenge-text").setHTML(this._getChallengeText(t))},_getStageText:function(t){return t.bonusRound?a.getText("bonus_stage"):1===t.numStages?"":a.getText("template",t)}},{ATTRS:{}})},"@VERSION@",{requires:["widget","base","util-Intl"]});
YUI.add("practice-Summary",function(s){var e=s.namespace("IXL"),n=[];e.Summary=s.Base.create("summary",s.Widget,[s.WidgetChild],{_nSection:null,_oThemeConf:{"snow-capped-mountain":{postRenderAction:function(){(this._nSection||s.one("section#bd")).append('<div class="dv-bottom-trim" />')}},"ocean-blue":{postRenderAction:function(){(this._nSection||s.one("section#bd")).appendChild('<div class="dv-bottom-trim" />').append(s.one(".practice-summary-box"))}},"sunny-roadtrip":{postRenderAction:null},"sky-fireworks":{postRenderAction:null},"desert-sunrise":{postRenderAction:function(){(this._nSection||s.one("section#bd")).appendChild('<div class="dv-bottom-trim" />').append(s.one(".practice-summary-box"))}},"spring-outing":{postRenderAction:function(){var e=(this._nSection||s.one("section#bd")).appendChild('<div class="dv-bottom-trim" />');e.appendChild('<div class="dv-blue-car" />'),e.appendChild('<div class="dv-white-car" />')}},"tropical-beach":{postRenderAction:null},"pebble-aquarium":{postRenderAction:null},"city-fireworks":{postRenderAction:null},"space-planets":{postRenderAction:null}},_loadCustomFontCSS:function(){var t=s.one("body");s.Object.each(this._oThemeConf,function(e,n){t.hasClass(n)&&s.later(2500,this,function(){s.use("practice-css-"+n)})})},_renderResponse:function(e){this.get("contentBox").setHTML(e.summary),this.fire("response-rendered")},_afterInitRender:function(e){var n,t,i=s.one("body");s.Object.each(this._oThemeConf,function(e,n){var t=e?e.postRenderAction:null;i.hasClass(n)&&t&&"function"==typeof t&&t.apply(this)},this),(n=s.one(".reveal-prize-star-inside"))&&(t=new s.Anim({node:n,from:{opacity:1},to:{opacity:.5},iterations:20,direction:"alternate",duration:1.15}))&&t.run&&t.run(),this.get("model").get("showRecommendations")?(this._makeSummaryRecommendations(),i.addClass("summary-recommendations-render")):(this._makeContinuePracticing(),i.addClass("summary-continue-practicing-render"))},_makeContinuePracticing:function(){var e=this._nSection||s.one("section#bd"),n=s.one("#id-hidden-input-continue-practice"),t="",i="",o="";n&&e&&(t=n.getData("namespace"),i=n.getData("action"),o=n.getData("txt"),e.appendChild('<div class="box-continue-practice" />').appendChild('<a class="crisp-button continue-practicing-lk" href="/'+t+"/"+i+'">'+o+"</a>"))},_makeSummaryRecommendations:function(){var e=this._nSection||s.one("section#bd"),n=document.createElement("div");e.appendChild(n);var t=this.get("model").get("recommendations").props.recommendations,i=document.getElementById("recommendations").value,o=t;if(i){try{i=JSON.parse(i)}catch(e){throw new Error(JSON.stringify({message:"IXL.Summary#_makeSummaryRecommendations: "+e,data:i}))}o=o.concat(i)}var a={adjPhrase:document.getElementById("gradeAdjPhrase").value,url:document.getElementById("gradeUrl").value};s.IXL.makeSummaryRecommendations(n,o,a)},_setSkillSummaryThemeWithURL:function(){var t=s.one("body"),e=s.config.doc.location,n=e?e.search:null,i=s.QueryString.parse(n)["?theme"]||null;s.Object.each(this._oThemeConf,function(e,n){t.hasClass(n)&&i&&(t.removeClass(n),t.addClass(i))})},load:function(e){var n=s.one("body");return this._nSection=s.one("section#bd"),this._renderResponse(e),n.addClass("skill-summary-render"),s.UA.webkit&&n.addClass("is-webkit"),s.when(this)},renderUI:function(){this._setSkillSummaryThemeWithURL(),this._loadCustomFontCSS()},bindUI:function(){this._bindAttrUI(n),this.on("response-rendered",this._afterInitRender,this)},syncUI:function(){this._syncAttrUI(n)},readyToHide:function(){return new s.Promise(function(){})}},{ATTRS:{model:{writeOnce:"initOnly"}}})},"@VERSION@",{requires:["widget","widget-child","promise","anim","get","querystring-parse"]});
YUI.add("practice-PracticeAgent",function(b){var W=b.namespace("IXL"),t=W.Intl.getModule("practice-PracticeAgent"),x=0,_=0,i=[],y=function(){return 0};function C(e){}window.performance&&(y=function(){return window.performance.now()}),W.PracticeAgent=b.Base.create("practiceAgent",b.Widget,[b.WidgetParent],{responseCssLoaded:!1,initializer:function(){var e=this.get("model");this.publish("showNextStep",{broadcast:2,emitFacade:!0}),this.questionWidget=new W.QuestionWidget({cargoName:"question",visible:!1}),this.add(this.questionWidget),this.cae=new W.CorrectAnswerExplanation({cargoName:"correctAnswerExplanation",visible:!1}),this.add(this.cae),this.challengeWidget=new W.ChallengeWidget({visible:!1}),this.add(this.challengeWidget),this.summaryWidget=new W.Summary({visible:!1,model:e}),this.add(this.summaryWidget),this.accoladesWidget=new W.Accolades({accolades:t.getText("correct"),visible:!1}),this.add(this.accoladesWidget),this.skillStepSkipMessageWidget=new W.SkillStepSkipMessage({skillStepSkipMessage:this.get("skipStepMessage"),visible:!1}),this.add(this.skillStepSkipMessageWidget),this.feedbackWidget=new W.Feedback({visible:!1,pesId:e.get("pesId")}),this.add(this.feedbackWidget),this.sampleFeedbackWidget=new W.SampleFeedback({visible:!1,btnImgPath:e.get("backToPracticeBtnImgPath")}),this.add(this.sampleFeedbackWidget),this.get("loadExplanationFeedback")&&(this.explanationFeedbackWidget=new W.ExplanationFeedback,this.add(this.explanationFeedbackWidget)),this.countdownWidget=new W.Countdown({visible:!1}),this.add(this.countdownWidget),this.stageStats=new W.StageStats(e.get("stageStats")),this.practiceStats=new W.PracticeStats(e.get("practiceStats")),this.multipartIndicator=new W.MultipartIndicatorView({container:b.one(".multipart-indicator-container"),model:e}),this.exampleQuestionButton=new W.ExampleQuestionButton({visible:!1,model:e,imgPath:e.get("exampleQuestionBtnImgPath")}),this.backToPracticeButton=new W.BackToPracticeButton({visible:!1,extraClassName:"toggle",imgPath:e.get("backToPracticeBtnImgPath")}),this._tryShowLogin(),this._lastOffsetMillis=0,this._minimumScoreForLastSkillStep=this.get("minimumScoreForLastSkillStep"),this._skipStepsEnabled=this.get("skipStepsEnabled")},renderUI:function(){var i=this;this.stageStats.render(b.one("#stats")),this.practiceStats.render(b.one("#stats")),this.exampleQuestionButton.render(b.one(".example-question-toggle")),this.backToPracticeButton.render(b.one(".example-question-toggle"));var e,n=this.get("model"),t=n.pose(),o=new Date;i.get("model").isSampleAvailableCurrently()&&(e=n.sample());var a=i.questionWidget.load(t).then(function(){i.get("model").isSampleAvailableCurrently()&&e.then(function(e){i.sampleFeedbackWidget.load(e)})}).then(function(){i._addToRenderTimes("FirstLoad",y())}),s={nextStageStats:n.get("stageStats"),prevStageStats:null},c=new b.Promise(function(e){e()});n.shouldShowChallenge()&&(c=c.then(function(){var e=n.get("cutoff")&&"NO_ACCESS"===n.get("cutoff").cutoffType;e&&i.challengeWidget.set("disabled",!0);var t=i.challengeWidget.load(s);return e?(i.showChild(t,s),i.showCutoff(),new b.Promise(function(){})):i.showChild(t,s)}).then(function(){return a}).then(function(){i.challengeWidget.hide()},C)),c.then(function(){return a}).then(function(){i.fire("showNextStep"),a.then(function(){i.showQuestion(t,a,new Date-o)})},C);var r=[];r.push(i._downloadCSS(["practice-css-accolades","practice-css-countdown","practice-css-feedback","practice-css-summary","practice-css-SkillStepSkipMessage","practice-css-sample-feedback"])),i.get("loadExplanationFeedback")&&r.push(i._downloadCSS(["practice-css-ExplanationFeedback"])),this.responseCssLoaded=b.batch.apply(b,r)},bindUI:function(){var t=this;this.get("model");this.explanationFeedbackWidget&&(this.feedbackWidget.on("evLoadExplanationFeedback",function(e){var t=e.data;this.explanationFeedbackWidget.load({pesId:this.get("model").get("pesId"),questionKey:t.questionKey})},this),this.explanationFeedbackWidget.on("focusBackToFeedback",function(){this.feedbackWidget.fire("button:enable")},this)),this.get("model").get("canSkipSteps")&&b.one(".skip-level").on("click",function(e){this.questionWidget.fire("requestSkipStep",{originalEvent:e,type:"click"})},this),t.exampleQuestionButton.on("hideQuestionView",function(e){t._toggleQuestionView(!1)}),t.exampleQuestionButton.on("showExampleView",function(e){t._toggleExampleView(!0)}),t.backToPracticeButton.on("hideExampleView",function(e){t._toggleExampleView(!1)}),t.backToPracticeButton.on("showQuestionView",function(e){t._toggleQuestionView(!0)}),t.sampleFeedbackWidget.on("hideExampleView",function(e){t._toggleExampleView(!1)}),t.sampleFeedbackWidget.on("showQuestionView",function(e){t._toggleQuestionView(!0)})},showQuestion:function(t,i,n){var o=this,e=this.get("model");this.practiceStats.set("in90Zone",90<=e.get("practiceStats.score")),t.then(function(e){e.question?t.then(function(e){return e.disabled&&o.questionWidget.set("disabled",!0),i}).then(function(){if(o._updateMultipartIndicator(),b.config.win.scroll(0,0),o.questionWidget.get("disabled"))return o.questionWidget.set("footerContent",""),o.questionWidget.show(),void o.showCutoff();o.questionWidget.show(),o.get("model").isSampleAvailableCurrently()&&o.exampleQuestionButton.show(),o._prepareCallbacks(n)}):o._handleStuck()},C)},_prepareCallbacks:function(t){this._lastOffsetMillis=t;var i=this;i.questionWidget.getGuessMap().then(function(e){return x=y(),i.get("model").tally(e.guessMap,t,{})}).then(function(e){i.showResponse(e)},C),i.questionWidget.prepareQuestionSkipPromise().then(function(){return i.get("model").skipAndPose()}).then(function(e){i.showSkipResponse(e)})},_showRecommendations:function(t){t.get("showRecommendations")&&!t.get("shownMoveOn")&&90<=t.get("practiceStats.score")&&t.recommend().then(function(e){t.set("shownMoveOn",!0),t.set("recommendations",b.IXL.makePracticeRecommendations(b.one("#recommendations-container").getDOMNode(),e,!0,t.getScore(t),null))},function(e){});var e=t.get("recommendations");e&&e.setHidden(!0)},_showOrHideSkipButton:function(e){var t=b.one(".skip-level");t&&t.toggleView(e)},_generateQuestionCallback:function(e,t,i,n){var o=this;return function(){o.questionWidget.load(t).then(function(e){return W.DelayedRendering.whenReady(e.question)}).then(function(){i.correct&&o._addToRenderTimes("TallyToQuestion",y()-x),o._addToRenderTimes("PoseToQuestion",y()-n)}).then(e)}},_generateHideCallback:function(e,t){var i=this;return function(){i.questionWidget.get("boundingBox").toggleClass("yui3-questionwidget-hidden",!0),i.practiceStats.setAttrs(e.practiceStats),i.stageStats.updatePrev(e),setTimeout(function(){i.questionWidget.hide(),i._hideExampleQuestionUI(),i.sampleFeedbackWidget.unload(),t()},0)}},_canSkipSteps:function(e){return this._skipStepsEnabled&&e<this._minimumScoreForLastSkillStep},showSkipResponse:function(c){var r=this,t=r.get("model");if(null===c)return r._prepareCallbacks(this._lastOffsetMillis),void r.questionWidget.reenableContent();var e=r._canSkipSteps(c.practiceStats.score);r._showOrHideSkipButton(e),r._showRecommendations(t);var i=t.pose();_=y();var n=function(){},l=c.countdown?r.countdownWidget:null,o=null;l||(o=r.skillStepSkipMessageWidget.load(c));var a=new b.Promise(function(e){n=r._generateQuestionCallback(e,i,c,_)});r.responseCssLoaded.then(function(){var e=b.when(null),s=r._generateHideCallback(c,n);[o,l].filter(function(e){return null!==e}).forEach(function(a){e=e.then(function(){var t,e=a;a===l&&(e=a.load(c));var i=s,n=new b.Promise(function(e){s=e});e.then(function(e){t=e,i()},C);var o=r.showChild(e,c);return o.then(function(e){e?n.then(function(){t.hide()},C):t.hide()},C),o},C)}),e.then(function(){a.then(function(){s(),r.stageStats.updateNext(c),r.fire("showNextStep"),r.showQuestion(i,a,0);var e=t.get("recommendations");e&&e.setHidden(!1)},C)},C)},C)},showResponse:function(s){var c=this,i=c.get("model");try{b.config.win._problemAnswered&&b.config.win._problemAnswered()}catch(e){}var e=c._canSkipSteps(s.practiceStats.score);c._showOrHideSkipButton(e&&s.correct),c._showRecommendations(i);var t=i.get("recommendations"),n=i.isMastered()?null:i.pose(),o=null;if(i.isMastered()){var a={};if(t){var r,l=sessionStorage.getItem("IXLRecNavUser"),d=t.props.recommendations;r=d.length<10?10-d.length:d.length%2==0?4:3;var u=[];d.forEach(function(e){u.push(e.skill.skillId)}),l&&(a.n=r,a.alreadyRecommended="["+u+"]",a.userId=l)}o=i.summary(a)}var g=new Date;_=y();var h=0,p=function(){},f=s.correct?null:c.feedbackWidget.load(s,function(){W.DelayedRendering.whenReady(s.explanation).then(function(){s.correct||c._addToRenderTimes("TallyToFeedback",y()-x)})}),m=s.correctAnswerExplanation?c.cae.load(s):null,w=s.correct&&s.countdown?c.countdownWidget:null,S=!s.correct||s.countdown&&!m?null:c.accoladesWidget.load(s),k=i.shouldShowChallenge()?c.challengeWidget.load(s):null,v=i.isMastered()?null:new b.Promise(function(e){p=c._generateQuestionCallback(e,n,s,_)});s.correct||c._showOrHideSkipButton(!1),c.responseCssLoaded.then(function(){var e=function(e){return null!==e};[f,m].filter(e).forEach(function(e){e.then(function(e){return e.readyToHide()}).then(function(){h=new Date-g},C)}),[f,m].filter(e).forEach(function(e){e.then(function(e){return e.readyToHide()}).then(function(){i.cease();var e=i.get("recommendations");e&&e.setHidden(!1)},C)});var t=b.when(null),a=c._generateHideCallback(s,p);(m&&w?[f,S,m,w,k]:[f,w,S,m,k]).filter(e).forEach(function(o){t=t.then(function(){var t;o==w&&(o=o.load(s));var i=a,n=new b.Promise(function(e){a=e});o.then(function(e){t=e,i()},C);var e=c.showChild(o,s);return e.then(function(e){e?n.then(function(){t.hide()},C):t.hide()},C),e},C)}),t.then(function(){v?v.then(function(){a(),null===k&&(c.stageStats.updateNext(s),c.fire("showNextStep")),c.showQuestion(n,v,h);var e=c._canSkipSteps(s.practiceStats.score);c._showOrHideSkipButton(e);var t=i.get("recommendations");t&&t.setHidden(!1)},C):o.then(function(e){a(),c._fireForLegacy("hidePrizesMessage"),b.one("#stats").setStyle("display","none"),b.one("#notice-texts").setStyle("display","none"),c.multipartIndicator.updateAndRender(null),c.summaryWidget.show(),c.summaryWidget.load(e)},C)},C)},C)},showChild:function(e,i){var n=this;return e.then(function(e){e===n.feedbackWidget&&n.practiceStats.set("in90Zone",90<=n.get("model").get("practiceStats.score")),e!==n.summaryWidget&&e!==n.challengeWidget||n.multipartIndicator.updateAndRender(null),e===n.challengeWidget&&(n.stageStats.updateNext(i),i.prevStageStats?n.fire("showNextStep"):n.fire("showInitialChallenge")),b.config.win.scroll(0,0);var t={};return e===n.accoladesWidget&&(t.shouldWaitUntilNextWidgetReady=!0),e.show().readyToHide(t)},C)},showCutoff:function(){var o=this;o.get("model").cutoff().then(function(e){var t=b.Node.create('<li class="notice-text notice-text-error"></li>');if(t.setHTML(e.cutoffMessage),"PRACTICE_LIMIT"===e.cutoffType){var i=b.one("#notice-texts .notice-text.notice-text-warning");i&&i.remove()}var n=o.get("model").get("recommendations");n&&n.setHidden(!0),b.one("#notice-texts").prepend(t),o._fireForLegacy("showCutoffPopover",e.cutoffType,e.popover)},C)},_updateMultipartIndicator:function(){var e=this.questionWidget.get("view").get("model").get("cargo").get("context").multipartInfo;this.multipartIndicator.updateAndRender(e)},_fireForLegacy:function(){var e=this,t=Array.prototype.slice.call(arguments);W.LegacyBridge.require(function(){e.fire.apply(e,t)})},_downloadCSS:function(t){return new b.Promise(function(e){b.use(t,function(){e()})})},_addToRenderTimes:function(e,t){i.push({requestType:e,duration:t}),10<=i.length&&(W.RetryIO("/practice/logRenderTime?pesId="+this.get("model").get("pesId"),{method:"POST",data:{renderTimesStr:b.JSON.stringify(i)}},3),i=[])},_tryShowLogin:function(){var e=!!this.get("model").get("cutoff");if(!e&&!this.get("signedIn")&&b.Cookie.get("HSI")&&!b.Cookie.get("shownlogin")){var t=new Date;t.setHours(t.getHours()+1),b.Cookie.set("shownlogin",Date.now(),{path:"/",domain:this.get("rootDomain"),expires:t}),e=!0,this.set("showLogin",!0)}e&&b.Global.onceAfter("question:focus",function(e){e.halt()})},_toggleQuestionView:function(e){this.questionWidget.set("visible",e),b.one("#stats").toggleView(e),b.one("#recommendations-container").toggleView(e),this.exampleQuestionButton.set("visible",e)},_toggleExampleView:function(e){b.one(".practice-container").toggleClass("sample-feedback-view",e),this.sampleFeedbackWidget.set("visible",e),this.backToPracticeButton.set("visible",e)},_hideExampleQuestionUI:function(){this.exampleQuestionButton.hide();var e=b.one(".practice-container.sample-feedback-available");e&&e.removeClass("sample-feedback-available")}},{ATTRS:{model:{writeOnce:"initOnly"},loadExplanationFeedback:{writeOnce:"initOnly",value:!1},showLogin:{value:!1},signedIn:{value:null},rootDomain:{value:null},minimumScoreForLastSkillStep:{value:null,writeOnce:"initOnly"},skipStepsEnabled:{value:null,writeOnce:"initOnly"},skipStepMessage:{value:null,writeOnce:"initOnly"}}})},"@VERSION@",{requires:["button","json","node","widget","widget-parent","cookie","io","practice-PracticeModel","practice-PracticeStats","practice-QuestionWidget","practice-Feedback","practice-CorrectAnswerExplanation","practice-ChallengeWidget","practice-StageStats","practice-Accolades","practice-Countdown","practice-SkillStepSkipMessage","practice-Summary","practice-MultipartIndicatorView","practice-ExplanationFeedback","practice-GCDisabler","practice-SampleFeedback","practice-ExampleQuestionButton","practice-BackToPracticeButton","util-LegacyBridge","util-Intl","util-RetryIO","q-DelayedRendering"]});
YUI.add('lang/practice-PracticeRecommendations', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['title_text.help.one'] = 'Not feeling ready yet? This can help:';
  text['title_text.help.other'] = 'Not feeling ready yet? These can help:';
  text['title_text.done'] = 'Done for now?';
  text['title_text.done.next'] = 'Done for now? Next up:';
  text['see_skills'] = 'See skills recommended for you';
  text['title_text.start'] = 'Start here, and work your way up!';
  IXL.Intl.addModule('practice-PracticeRecommendations', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("practice-RecommendationHover",function(e){var s=e.namespace("IXL"),i=s.React.getReactInstance(),r=require("ixl/external/react/prop-types"),a=require("ixl/external/react/create-react-class");s.RecommendationHover=a({displayName:"RecommendationHover",propTypes:{name:r.string.isRequired,code:r.string.isRequired,grade:r.string.isRequired,screenshot:r.string,score:r.number,isMastered:r.bool.isRequired,isHidden:r.bool.isRequired,color:r.object.isRequired,adjustPosition:r.number},render:function(){var e,s,r=this.props.isHidden?" hover-hidden":"",a={};this.props.color.color&&(a={color:this.props.color.color}),this.props.isMastered&&(e=i.createElement("div",{className:"medal"})),void 0!==this.props.score&&(s=i.createElement("span",{className:"score-text"},"(",this.props.score,")"));var o={border:"1px solid "+this.props.color.color,boxShadow:"0px 0px 6px 0px "+this.props.color.shadow};this.props.adjustPosition&&(o.right="-"+this.props.adjustPosition+"px");var t=null;return this.props.screenshot&&(t=i.createElement("img",{className:"screenshot",src:"/screenshot/"+this.props.screenshot+".png"})),i.createElement("div",{className:"recommendation-hover"+r,style:o},t,i.createElement("div",{className:"hover-header"},i.createElement("div",{className:"skill-code",style:a},this.props.code),i.createElement("div",{className:"skill-name-container"},i.createElement("span",{className:"hover-skill-name",dangerouslySetInnerHTML:{__html:this.props.name}}),i.createElement("span",{className:"grade-name"}," - "),i.createElement("span",{className:"grade-name unbreakable"},this.props.grade),i.createElement("span",{className:"grade-name"}," "),i.createElement("span",{className:"score-info"},s,e))))}})},"@VERSION@",{requires:["global-React","practice-css-recommendation-hover"]});
YUI.add("practice-PracticeRecommendation",function(r){var e=r.namespace("IXL"),a=e.React.getReactInstance(),t=require("ixl/external/react/prop-types"),o=require("ixl/external/react/create-react-class"),c=e.RecommendationHover;e.PracticeRecommendation=o({displayName:"PracticeRecommendation",propTypes:{recommendation:t.object.isRequired,color:t.object.isRequired,colors:t.array.isRequired,fullHistory:t.array,history:t.array,findScore:t.func,startTime:t.number,isSummaryRec:t.bool},getInitialState:function(){return{timeout:null,isHovered:!1,isHidden:!0}},_calculateAssignMaxWidth:function(e,t){var o=Math.ceil(this.refs.scoreInfo.getBoundingClientRect().width),i=Math.ceil(this.refs.skillCode.getBoundingClientRect().width);this.refs.skillName.style.maxWidth="calc(100% - "+(o+i+8)+"px)"},componentDidUpdate:function(e,t){this._calculateAssignMaxWidth(e,t)},componentDidMount:function(){this._calculateAssignMaxWidth()},render:function(){var e,t,o=44;void 0!==this.props.recommendation.score&&(e=a.createElement("span",{className:"score-text"}," ("+this.props.recommendation.score+")"),o+=45);var i={color:this.props.color.color};this.props.recommendation.mastered&&(t=a.createElement("div",{className:"medal"}),o+=20);var s={maxWidth:"calc(100% - "+o+"px)"},r=1<window.devicePixelRatio?this.props.recommendation.fullSizeScreenshot:this.props.recommendation.screenshot,n="/"+this.props.recommendation.subjectUrl+"/"+this.props.recommendation.url+"/"+this.props.recommendation.skill.skillUrl;return a.createElement("a",{className:"recommendation-link",href:n,onClick:this._clickNavLink()},a.createElement("div",{className:"recommendation",onMouseEnter:this._mouseOver,onMouseLeave:this._mouseOut},a.createElement("span",{className:"skill-code",style:i,ref:"skillCode"},this.props.recommendation.skillCode),a.createElement("span",{ref:"skillName",className:"skill-name",style:s,dangerouslySetInnerHTML:{__html:this.props.recommendation.skill.name}}),a.createElement("span",{ref:"scoreInfo",className:"score-info"},e,t),a.createElement(c,{isMastered:this.props.recommendation.mastered,screenshot:r,score:this.props.recommendation.score,name:this.props.recommendation.skill.name,isHidden:this.state.isHidden,code:this.props.recommendation.skillCode,color:this.props.color,grade:this.props.recommendation.gradeName})))},_mouseOver:function(){var e=this,t=setTimeout(function(){e.state.isHovered&&e.setState({isHidden:!1})},250);this.setState({timeout:t,isHovered:!0})},_mouseOut:function(){this.state.timeout&&clearTimeout(this.state.timeout),this.setState({timeout:null,isHidden:!0,isHovered:!1})},_clickNavLink:function(){var n=this,a=e.PracticeRecommendation._trackRecommendations;return this.props.history?function(){for(var e=n.props.fullHistory,t=n.props.recommendation,o=[],i=0;i<e.length;i++){i%n.props.colors.length==0&&(o=n.props.colors.slice());var s=Math.floor(Math.random()*o.length),r=o.splice(s,1)[0]}return e[e.length-1].color=r,e.push(t),sessionStorage.setItem("IXLRecNavHistory",JSON.stringify(e)),a(n),!0}:function(){return a(n),!0}}}),e.PracticeRecommendation._trackRecommendations=function(e){var t=window.gaq;if(t){var o=e.props.recommendation.subjectUrl+" - "+e.props.recommendation.gradeName+" - "+e.props.recommendation.skillCode;if(e.props.isSummaryRec)t("send","event","Recommendations","Summary rec",o);else{var i=e.props.findScore()||0,s=Math.round((Date.now()-e.props.startTime)/1e3);if(t("send","event","Recommendations","In-practice score",o,i),t("send","event","Recommendations","In-practice time",o,s),e.props.history)t("send","event","Recommendations","In-practice history",o,e.props.history.length)}}r.io("/recommendations/track",{method:"POST",data:{skill:e.props.recommendation.skill.skillId,source:"PRACTICE"}})}},"@VERSION@",{requires:["global-React","practice-RecommendationHover","practice-css-practice-recommendation"]});
YUI.add("practice-SkillHistoryElement",function(e){var t=e.namespace("IXL"),c=t.React.getReactInstance(),i=t.React.getReactDOM(),s=require("ixl/external/react/prop-types"),o=require("ixl/external/react/create-react-class"),m=t.RecommendationHover,r=o({displayName:"SkillHistoryElement",propTypes:{element:s.object.isRequired,color:s.object,positionInList:s.number.isRequired,historyLength:s.number.isRequired,isLast:s.bool,isLayered:s.bool,showInMobile:s.bool,showInTablet:s.bool},getInitialState:function(){return{timeout:null,isHovered:!1,isHidden:!0,hoverAdjustPosition:null}},render:function(){var e={},t={};this.props.color&&(e={color:this.props.color.color,backgroundColor:this.props.color.color,borderColor:this.props.color.color},t=this.props.color);var s=1<window.devicePixelRatio?this.props.element.fullSizeScreenshot:this.props.element.screenshot,o="/"+this.props.element.subjectUrl+"/"+this.props.element.url+"/"+this.props.element.skill.skillUrl,i="backtrack-cell",r="skill-history-element",l=c.createElement(m,{isMastered:this.props.element.mastered,screenshot:s,score:this.props.element.score,name:this.props.element.skill.name,isHidden:this.state.isHidden,code:this.props.element.skillCode,color:t,grade:this.props.element.gradeName,adjustPosition:this.state.hoverAdjustPosition,ref:"hover"}),n=c.createElement("div",{className:"backtrack-arrow"}),a=null;return this.props.isLast&&(o=null,e.backgroundColor="white",e.color="#808080",i+=" last-cell",n=l=null,a=c.createElement("div",{className:"star-pin"})),this.props.isLayered&&(i+=" layered"),this.props.showInTablet&&(r+=" show-in-tablet"),this.props.showInMobile&&(r+=" show-in-mobile"),c.createElement("div",{className:r},c.createElement("a",{className:"backtrack-link",href:o},l,c.createElement("div",{className:i,style:e,onMouseEnter:this._mouseOver,onMouseLeave:this._mouseOut},this.props.element.skillCode)),n,a)},_mouseOver:function(){var e=this,t=setTimeout(function(){e.state.isHovered&&e.setState({isHidden:!1})},250);if(this.refs.hover){var s=i.findDOMNode(this).getBoundingClientRect().right-480,o=document.getElementById("bd").getBoundingClientRect().left;s<o&&this.setState({hoverAdjustPosition:o-s})}this.setState({timeout:t,isHovered:!0})},_mouseOut:function(){this.state.timeout&&clearTimeout(this.state.timeout),this.setState({timeout:null,isHidden:!0,isHovered:!1})}});e.namespace("IXL").SkillHistoryElement=r},"@VERSION@",{requires:["global-React","practice-RecommendationHover","practice-css-skill-history-element"]});
YUI.add("practice-SkillHistory",function(t){var e=t.namespace("IXL"),l=e.React.getReactInstance(),r=require("ixl/external/react/prop-types"),s=require("ixl/external/react/create-react-class"),c=e.SkillHistoryElement,i=s({displayName:"SkillHistory",propTypes:{fullHistory:r.array.isRequired,history:r.array.isRequired,colors:r.array.isRequired},componentDidMount:function(){var e={history:this.props.history.map(function(e){return e.skill.skillId})},s=this;t.io("/recommendations/backtrack",{data:e,method:"POST",on:{success:function(e,t){if(t.responseText){var r;try{r=JSON.parse(t.responseText)}catch(e){JSON.stringify({message:"SkillHistory#componentDidMount: "+e,data:t.responseText})}s._updateHistoryScores(r)}}}})},render:function(){var n=this.props.history,a=this.props.fullHistory;return n.length<2?null:l.createElement("div",{className:"skill-history"},n.map(function(e,t){var r=0===t&&a.length>n.length,s=t===n.length-1,i=t>=n.length-6,o=t>=n.length-8;return l.createElement(c,{element:e,color:e.color,isLayered:r,isLast:s,showInMobile:i,showInTablet:o,positionInList:t,historyLength:n.length,key:"skill-history-element-"+t})}))},_updateHistoryScores:function(r){this.props.history.forEach(function(e){var t=r[e.skill.skillId+""];t&&t.score&&(e.score=t.score,e.mastered=t.mastered)})}});t.namespace("IXL").SkillHistory=i},"@VERSION@",{requires:["global-React","practice-SkillHistoryElement"]});
YUI.add("practice-PracticeRecommendations",function(e){var d=e.namespace("IXL"),h=d.Intl.getModule("practice-PracticeRecommendations"),g=d.React.getReactInstance(),u=d.React.getReactDOM(),t=require("ixl/external/react/prop-types"),r=require("ixl/external/react/create-react-class"),p=d.PracticeRecommendation,f=d.SkillHistory,y=[{color:"#00a6e4",shadow:"rgba(0, 166, 228, 0.5)"},{color:"#8cc713",shadow:"rgba(140, 199, 19, 0.5)"},{color:"#3281c9",shadow:"rgba(50, 129, 201, 0.5)"},{color:"#56c231",shadow:"rgba(86, 194, 49, 0.5)"},{color:"#2db7bf",shadow:"rgba(45, 183, 191, 0.5)"},{color:"#4fcaa0",shadow:"rgba(79, 202, 160, 0.5)"},{color:"#528efa",shadow:"rgba(82, 142, 250, 0.5)"},{color:"#39bf72",shadow:"rgba(57, 191, 114, 0.5)"},{color:"#59a9e6",shadow:"rgba(89, 169, 230, 0.5)"},{color:"#4ea601",shadow:"rgba(78, 166, 1, 0.5)"},{color:"#38c5f3",shadow:"rgba(56, 197, 243, 0.5)"},{color:"#11b76b",shadow:"rgba(17, 183, 107, 0.5)"}],R=r({displayName:"PracticeRecommendations",propTypes:{thisSkill:t.object.isRequired,recommendations:t.array.isRequired,fullHistory:t.array.isRequired,history:t.array.isRequired,moveOn:t.bool.isRequired,findScore:t.func.isRequired},getInitialState:function(){return{hidden:!1}},render:function(){var e,s=[],a=[],o=0,i=this.props.history,c=this.props.fullHistory,n=this.props.findScore,l=Date.now();this.props.recommendations.forEach(function(e){o%y.length==0&&(s=[],y.forEach(function(e){s.push(e)}));var t=Math.floor(Math.random()*s.length),r=s.splice(t,1)[0];a.push(g.createElement(p,{recommendation:e,color:r,colors:y,history:i,fullHistory:c,findScore:n,key:"rec"+e.skill.skillId,startTime:l})),o++});var t=this.props.recommendations.length;e=this.props.moveOn?0!==t?h.getText("title_text.done.next"):h.getText("title_text.done"):0===t?h.getText("title_text.start"):h.getText("title_text.help."+d.PluralRules.select(t));var r=null;0===this.props.recommendations.length&&this.props.moveOn&&(r=g.createElement("a",{className:"recs-page-link arrow-link",href:"/recommendations"},g.createElement("span",{className:"recs-page-link-text"},h.getText("see_skills"))));var m=this.state.hidden||!this.props.moveOn&&0===this.props.recommendations.length&&1===this.props.history.length?" recommendations-hidden":"";return g.createElement("div",{className:"recs-container"+m,key:this.props.moveOn?"0":"1"},g.createElement("div",{className:"recs-title"},g.createElement(f,{history:this.props.history,fullHistory:this.props.fullHistory,colors:y}),g.createElement("span",{className:"recs-title-text"},e)),a,r)},setHidden:function(e){this.setState({hidden:e})}});e.namespace("IXL").makePracticeRecommendations=function(e,t,r,s,a){var o,i=t.shift(),c=sessionStorage.getItem("IXLRecNavHistory");try{o=JSON.parse(c)}catch(e){JSON.stringify({message:"IXL.makePracticeRecommendations: "+e,data:c})}var n,l=!1;if(null!==o&&null!==o[0])for(n=0;n<o.length;n++)if(o[n].skill.skillId===i.skill.skillId){o=o.slice(0,n+1),l=!0;break}var m=sessionStorage.getItem("IXLRecNavUser");"string"==typeof a&&(""===a?""!==m&&(sessionStorage.setItem("IXLRecNavUser",""),l=!1):(sessionStorage.setItem("IXLRecNavUser",a),m!==a&&""!==m&&(l=!1))),l||(o=[i],sessionStorage.setItem("IXLRecNavHistory",JSON.stringify(o)));var d=o;10<o.length&&(o=o.slice(o.length-10,o.length));var h={thisSkill:i,recommendations:t,moveOn:r,history:o,fullHistory:d,findScore:s},p=g.createElement(R,h);return u.render(p,e)}},"@VERSION@",{requires:["global-React","practice-RecommendationHover","practice-PracticeRecommendation","practice-SkillHistory","practice-css-practice-recommendations","util-Intl","util-PluralRules"]});
YUI.add('lang/practice-SummaryRecommendations', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['to_recommendations'] = 'Go to recommendations';
  text['more_skills'] = 'Explore more skills to practice';
  text['all_skills'] = 'See all skills recommended for you!';
  text['to_all_skills'] = 'Back to all {gradePhrase} skills';
  IXL.Intl.addModule('practice-SummaryRecommendations', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("practice-SummaryRecommendations",function(e){var a=e.namespace("IXL"),r=a.Intl.getModule("practice-SummaryRecommendations"),c=a.React.getReactInstance(),t=a.React.getReactDOM(),o=require("ixl/external/react/prop-types"),s=require("ixl/external/react/create-react-class"),n=a.PracticeRecommendation,m=[{color:"#00a6e4",shadow:"rgba(0, 166, 228, 0.5)"},{color:"#8cc713",shadow:"rgba(140, 199, 19, 0.5)"},{color:"#3281c9",shadow:"rgba(50, 129, 201, 0.5)"},{color:"#56c231",shadow:"rgba(86, 194, 49, 0.5)"},{color:"#2db7bf",shadow:"rgba(45, 183, 191, 0.5)"},{color:"#4fcaa0",shadow:"rgba(79, 202, 160, 0.5)"},{color:"#528efa",shadow:"rgba(82, 142, 250, 0.5)"},{color:"#39bf72",shadow:"rgba(57, 191, 114, 0.5)"},{color:"#59a9e6",shadow:"rgba(89, 169, 230, 0.5)"},{color:"#4ea601",shadow:"rgba(78, 166, 1, 0.5)"},{color:"#38c5f3",shadow:"rgba(56, 197, 243, 0.5)"},{color:"#11b76b",shadow:"rgba(17, 183, 107, 0.5)"}],l=s({displayName:"SummaryRecommendations",propTypes:{recommendations:o.array.isRequired,colors:o.array.isRequired,gradePhrase:o.string,gradeUrl:o.string},render:function(){var t=[],s=[];this.props.recommendations.forEach(function(e,a){a%this.props.colors.length==0&&(t=[],this.props.colors.forEach(function(e){t.push(e)}));var r=Math.floor(Math.random()*t.length),o=t.splice(r,1)[0];s.push(c.createElement(n,{recommendation:e,color:o,colors:this.props.colors,key:"rec"+e.skill.skillId,isSummaryRec:!0}))},this);var e=null;return 0!==this.props.recommendations.length&&(e=c.createElement("section",{className:"summary-recommendations-content site-nav-fixed-width"},c.createElement("h1",{className:"explore-header"},r.getRaw("more_skills")),c.createElement("div",{className:"box-each-recommendation-link"},s))),c.createElement("section",{className:"summary-recommendations-container"},e,c.createElement("section",{className:"more-recommendations"+(0===this.props.recommendations.length?"":" background")},c.createElement("div",{className:"more-recommendations-inner site-nav-fixed-width"},c.createElement("h1",null,r.getRaw("all_skills")),c.createElement("div",{className:"button-container"},c.createElement("a",{href:"/recommendations",className:"crisp-button"},r.getRaw("to_recommendations"))))),c.createElement("a",{className:"back-text",href:this.props.gradeUrl},c.createElement("span",{className:"link-text"},r.getRaw("to_all_skills",{gradePhrase:this.props.gradePhrase})),c.createElement("span",{className:"arrows"}," >>")))}});e.namespace("IXL").makeSummaryRecommendations=function(e,a,r){var o={recommendations:a,colors:m,gradePhrase:r.adjPhrase,gradeUrl:r.url};t.render(c.createElement(l,o),e)}},"@VERSION@",{requires:["global-React","practice-PracticeRecommendation","practice-css-summary-recommendations","util-Intl"]});
