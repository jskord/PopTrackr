YUI.add("q-ParenResizerPlugin",function(t){var n=t.namespace("IXL");function a(e){return e.test(".openParen")}function i(e){i.superclass.constructor.apply(this,arguments)}i.NAME="parenResizerPlugin",i.NS="parenResizerPlugin",t.extend(i,t.Plugin.Base,{initializer:function(e){var i,s=this.get("host");"("!==(i=s.getHTML())&&")"!==i||s.setHTML(""),this._shapeType=a(s)?n.OpenParen:n.CloseParen,this._ascii=a(s)?"(":")",this._graphic=new t.Graphic({render:s}),this._shape=this._graphic.addShape({type:this._shapeType,width:9,height:30,stroke:{weight:1,color:"#000"}})},resize:function(e,i,s){var t,n=this.get("host"),a=e+5;1<e?(this._shape.set("visible",!0),this._shape.set("height",a),n.setStyles({height:(t=e,13/29*t+313/29+"px")})):this._shape.set("visible",!1)}}),n.ParenResizerPlugin=i},"@VERSION@",{requires:["base","node","array-extras","plugin","q-OpenParen","q-CloseParen"]});
YUI.add("q-TriggerParenResizerPlugin",function(e){var g=e.namespace("IXL"),u=g.SymPadUtils.inDoc;function r(e){r.superclass.constructor.apply(this,arguments)}r.NAME="triggerParenResizerPlugin",r.NS="triggerParenResizerPlugin",e.extend(r,e.Plugin.Base,{initializer:function(e){var r,n,t,a,s;this.resize=(this.get("host"),t=(r=e).openParen,a=r.closeParen,s=[t,a],function(){var e,r,i;if(t&&a&&u(t)&&u(a))for(e=function(e,r){var i,n,t=0;if(e&&r){for(i=e.next();i&&i!==r;)t<(n=i.get("region").height)&&(t=n),i=i.next();return t}}(t,a),n=0;n<s.length;n++)i=e,(r=s[n]).test(".parens")&&r[g.ParenResizerPlugin.NS].resize(i)})}}),g.TriggerParenResizerPlugin=r},"@VERSION@",{requires:["base","node","array-extras","plugin","q-ParenResizerPlugin","q-SymPadUtils"]});
YUI.add("q-XRegionEvents",function(h){h.namespace("IXL");function s(e){var n=e.get("region");return{node:e,left:n.left,right:n.right}}function e(c){return{on:function(e,n,t){var r,o,i,a,l,u,d=e.get("region"),f=(r=d.left,o=d.right,i=n._extra,a=c,l=t,u=i,function(e){var n=e.pageX,t=a(r,o,u,n);t.shouldFire&&(t.shouldFire=null,l.fire(t)),u=n});n._handle=h.one("html").on("mousemove",f)},detach:function(e,n,t){n._handle.detach()},delegate:function(e,n,t,r){var i,o,a,l,u,d=e.all(r).map(s),f=(i=d,o=n._extra,a=c,l=t,u=o,function(e){var o=e.pageX;h.Array.each(i,function(e){var n=e.left,t=e.right,r=a(n,t,u,o);r.shouldFire&&(r.shouldFire=null,r.target=e.node,l.fire(r))}),u=o});n._handle=h.one("html").on("mousemove",f)},detachDelegate:function(e,n,t){n._handle.detach()},processArgs:function(e,n){var t;return n&&4<e.length?(t=e[5],e.splice(5,1),t):!n&&3<e.length?(t=e[4],e.splice(4,1),t):-1}}}h.Event.define("xregionenter",e(function(e,n,t,r){return{shouldFire:e<=r&&r<=n&&(t<e||n<t)||t<e&&n<r||n<t&&r<e,leftBoundary:t<e}})),h.Event.define("xregionleave",e(function(e,n,t,r){return{shouldFire:e<=t&&t<=n&&(r<e||n<r)||t<e&&n<r||n<t&&r<e,leftBoundary:r<=e}})),h.Event.define("xmidcrossed",e(function(e,n,t,r){var o=e+(n-e)/2;return{shouldFire:o<t&&r<=o||t<=o&&o<r,fromLeft:t<=o}}))},"@VERSION@",{requires:["base","node","array-extras","event-synthetic","yui-gallery-nodelist-extras2"]});
YUI.add("q-SymPadFIWidget",function(f){var p=f.namespace("IXL"),n=require("ixl/content/util/fillIn/FillInNavigationController"),o=require("ixl/content/util/YUA"),e=(require("ixl/content/util/transition-node"),f.Array),t=f.Node,s=(f.Do.Halt,"symPadCursor"),a=p.AITUtils.insertAsFirstContentNode,d=p.SymPadUtils.inDoc,g=p.SymPadUtils.KeyboardUpdateDirective.UPDATE_KEYBOARD,_=p.SymPadUtils.KeyboardUpdateDirective.LOAD_NEW_KEYBOARD,c=p.SymPadUtils.KeyboardUpdateDirective.UPDATE_KEYBOARD_AND_DO_NOT_FIRE_LEGACY_EVENTS;var i={0:"tab",8:"backspace",13:"enter in chrome",33:"!",34:'"',35:"#",36:"$",37:"%",38:"&",39:"'",58:":",59:";",63:"?",64:"@",92:"\\",94:"^",95:"_",96:"`",127:"fix for case 50473",192:"alt/tab in firefox",8730:"âˆš"};function l(e){return"string"==typeof i[e]}function v(e){this.get("disabled")||this.get("contentBox").one("div.hidden > .proxy-input").focus()}function h(e,t){e.halt(t)}function r(e){var t=e.get("boundingBox"),i=e._caret,n=e.get("contentBox");t.all(".hasCursor").removeClass("hasCursor"),d(i)||n.one(".selection")?(n.addClass("hasCursor"),t.addClass("hasCursor")):t._node&&t.removeClass("hasCursor")}function u(e){e&&(e.get("id")&&(e.removeAttribute("id"),e.generateID()),e.get("children").each(u))}function m(e){var t=e.cloneNode(!0);return t.removeClass("selection"),t.all(".selection").removeClass("selection"),u(t),t}var b=".aitInput";function C(e){function t(e,t){var i=C(t.get("children"))+(t.test(b)?1:0);return i<e?e:i}return f.Lang.isArray(e)?f.Array.reduce(e,0,t):e.reduce(0,t)}function y(e){for(var t=e.previous();t&&t.test(".secret");)t=t.previous();return t&&t.test(".hidden")?null:t}function I(e){for(var t=e.next();t&&t.test(".secret");)t=t.next();return t&&t.test(".hidden")?null:t}function A(e,t){var i=t.next();i?i.ancestor().insertBefore(e,i):t.ancestor().appendChild(e)}function N(e){var t=e.get("contentBox").all(".selection, .enteredFromLeft, .enteredFromRight");t.removeClass("selection"),t.removeClass("enteredFromLeft"),t.removeClass("enteredFromRight")}function x(e){var t=e.target,i=f.Widget.getByNode(t),n=i._caret;t.hasClass("selection")?(t.removeClass("selection"),i.hasSelected()||(e.fromLeft?A(n,t):t.ancestor().insertBefore(n,t),n.plug(p.NodeBlinker))):(t.addClass("selection"),d(n)&&(n.remove(!1),n.unplug(p.NodeBlinker)))}function P(e){var t=e.target;t.test(".mousedownInside")?t.removeClass("selection"):(t.addClass("selection"),e.leftBoundary?t.test(".enteredFromRight")||t.addClass("enteredFromLeft"):t.test(".enteredFromLeft")||t.addClass("enteredFromRight"))}function S(e){var t=e.target;if(t.test(".mousedownInside"))t.addClass("selection");else if(t.test(".selection")){I(t),y(t);var i=e.leftBoundary;!i&&t.test(".enteredFromRight")?(t.removeClass("selection"),t.removeClass("enteredFromRight")):i&&t.test(".enteredFromLeft")&&(t.removeClass("selection"),t.removeClass("enteredFromLeft"))}}function T(e,t){var i=[],n=this._caret,s=".aitBlock";if(d(n)){var r=n.ancestor(".fractionAIT");if(r){var a=r.one(".numerator.aitInput");!function e(t,i,n,s,r,a){var o,l,h=".aitBlock";if(t&&!t.test(".hidden")&&!t.test(".secret"))if(t.test(".plainChar"))a.push(t.on("xmidcrossed",x,".plainChar",this,i));else{if(t.test(h)&&(a.push(t.on("xregionenter",P,h,this,i)),a.push(t.on("xregionleave",S,h,this,i))),t===n&&r||t===s&&!r)return a.push(t.delegate("xmidcrossed",x,".plainChar",this,i)),a.push(t.delegate("xregionenter",P,h,this,i)),void a.push(t.delegate("xregionleave",S,h,this,i));if(t!==n&&t!==s)for(o=t.get("children"),l=0;l<o.size();l++)e(o.item(l),i,n,s,r,a)}}(e,t,a,r.one(".denominator.aitInput"),n.ancestor(".numerator.aitInput")===a,i)}else i.push(e.delegate("xmidcrossed",x,".plainChar",this,t)),i.push(e.delegate("xregionenter",P,s,this,t)),i.push(e.delegate("xregionleave",S,s,this,t));return i}}function B(e){e.preventDefault()}function F(e,t){var i=this._caret,n=(this.get("contentBox"),this.hasCaret());this.hasSelected()&&i.remove(!1),f.all(".mousedownInside").removeClass("mousedownInside"),f.Array.invoke(t,"detach"),this._afterCaretMove(n?g:_)}function M(e){var t=e.domEvent,i=t.keyCode,n=t.ctrlKey;8===i?this._handleBackspace(e):46===i?(e.halt(!0),this._handleDelete(e)):37===i?this._handleLeftArrow(e):38===i?this._handleUpArrow(e):39===i?this._handleRightArrow(e):40===i?this._handleDownArrow(e):9===i||(67===i&&n?this._copy():86===i&&n&&this._paste())}function k(e){var t="string"==typeof e.toInsert?e.toInsert:e;this._insertChars(t,e.cssClass),this._alignVFrac()}function w(e){var t=e._event.data;if("string"==typeof t)for(var i=0;i<t.length;i++){l(t.charCodeAt(i))||f.bind(k,this)(t.charAt(i))}}function D(e){var t,i=e._event,n=i.keyCode,s=i.charCode,r=i.which;94!==n&&94!==s?95!==n&&95!==s?(e.ctrlKey||(void 0===r?l(n)||(t=String.fromCharCode(n)):0!==r&&0!==s&&(l(r)||(t=String.fromCharCode(r)))),void 0!==t&&f.bind(k,this)(t)):this._handleUnderscore(e):this._handleCaret(e)}function U(e){U.superclass.constructor.apply(this,arguments)}U.NAME="symPadFIWidget",U.ATTRS={width:{value:100},maxNumNests:{value:0}},f.publish("symPadUp",{emitFacade:!0}),f.publish("symPadDeletePrev",{emitFacade:!0}),f.publish("symPadDeleteNext",{emitFacade:!0}),f.publish("fillInInsert",{emitFacade:!0}),f.publish("fillInDelete",{emitFacade:!0}),f.publish("symPadNestabilityUpdate",{emitFacade:!0}),f.extend(U,f.Widget,{initializer:function(e){this._handles=[],this._caret=t.create('<div id="'+s+'"><span>c</span></div>'),this._symPad=e.symPad,this._keyboardData=e.keyboardData,this._disableNestingRules=e.disableNestingRules,this._mathMLRenderer=e.mathMLRenderer,this._context=e.context,this._answer=e.answer,this._registerFillIn=e.registerFillIn,this._symPad&&function(t,e){f.Array.each(e,function(e){f.Lang.isFunction(e.getFIPlugin)&&(t.plug(e.getFIPlugin()),t._handles.push(f.after(e.name,t._afterCaretMove.bind(t,g))))},this)}(this,this._symPad.buttons),this.plug(p.BlankAITInputParserPlugin),this.publish("resizeSymbolPad",{emitFacade:!0,bubbles:!0}),f.UA.mobileapp?this._registerFillIn&&(this._mobileFINavKey=n.registerFillIn({domNodeProvider:this._getFillInNode.bind(this),focusCallback:this._forceFocus.bind(this),blurCallback:this.blur.bind(this),hasNextInternalFillIn:this._hasNextInternalFillIn.bind(this),focusNextInternalFillIn:this._focusNextInternalFillIn.bind(this),insertContentCallback:k.bind(this),deleteOneCallback:this._handleBackspace.bind(this),deleteAllCallback:this.deleteAll.bind(this),isEmptyCallback:this.isEmpty.bind(this)})):this._handles.push(f.on("fillInInsert",k,this))},destructor:function(){e.invoke(this._handles,"detach"),this._handles=null,f.UA.mobileapp&&this._registerFillIn&&n.deregisterFillIn(this._mobileFINavKey)},_getFillInNode:function(){return this.get("contentBox")._node},renderUI:function(){var e,t=this.get("contentBox"),i=t.appendChild('<div class="hidden"/>');if((e=o.mobileapp?i.appendChild('<div class="proxy-input" tabindex="0" />'):o.android?i.appendChild('<input class="proxy-input" autocapitalize="off" autocorrect="off" autocomplete="off" type="password" spellcheck="false" />'):i.appendChild('<input class="proxy-input" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" />'))._node._symPadFIWidget=this,f.UA.ie&&i.setStyle("right","9999px"),this.get("focused")){var n=this.hasCaret();t.appendChild(this._caret),this._afterCaretMove(n?g:_)}t.appendChild('<div class="secret">c</div>'),this.get("disabled")&&(e.setAttribute("disabled","true"),e.setAttribute("tabindex","-1"),this._answer&&(t.addClass("symPadAnswerArea"),"string"==typeof this._answer?t.appendChild('<div class="answerText"/>').set("text",this._answer):(this._answer._parentNode=t,this._answer.render())))},hasCaret:function(){var e=f.one("#symPadCursor");return e&&this===f.Widget.getByNode(e)},focusIfNeeded:function(e){v.call(this);var t=this.get("contentBox"),i=this._caret,n=this.hasCaret();if(!d(i)&&!t.one(".selection")&&!t.ancestor(".yui3-sympadfiwidget-disabled")){t.appendChild(i),i.plug(p.NodeBlinker);var s=this._symPad;s&&(s.set("disabled",!1),s.set("visible",!0),s.set("fiToEdit",this)),this._afterCaretMove(n?g:_)}},bindUI:function(){var e=this.get("boundingBox"),t=this.get("contentBox"),i=this._symPad,n=e.one("div.hidden > .proxy-input"),s=f.UA.ios,r=f.one("html");if(this._handles.push(r.on("mousedown",this.handleMousedownHTML,this)),this._handles.push(n.on("focus",this.focusIfNeeded,this)),i){var a=i.get("boundingBox");s&&this._handles.push(a.on("mousedown",h,this,!1))}this._handles.push(n.on("keydown",this._handleTabKeyFromDummyInput)),this._handles.push(this.on("keydown",M,this)),o.android&&!o.androidapp?this._handles.push(n.on("textInput",w,this)):this._handles.push(n.on("keypress",D,this)),o.ios&&!o.iosapp&&this._handles.push(n.on("blur",this.blur,this)),i&&this._handles.push(i.get("boundingBox").on("click",this._afterCaretMove.bind(this,g))),this._handles.push(e.after("mouseup",this.focusIfNeeded,this)),this._handles.push(t.after("keyup",this._afterCaretMove.bind(this,g))),this._handles.push(e.on("selectstart",B,this))},toggleInteractiveState:function(e,t){var i=this.get("boundingBox");if(i){var n=i.one("div.hidden > .proxy-input");if(n&&(n.blur(),this.blur()),this.set("disabled",!e),t){var s=this.get("contentBox");s&&(e?s.removeClass("disabled-appearance"):s.addClass("disabled-appearance"));var r=i.ancestor(".section");if(r&&r._node){var a,o=parseInt(r.getStyle("padding-bottom"),10)||0;e?a=this._containingSectionPadding:(a=0,this._containingSectionPadding=o),r.setStyle("padding-bottom",a+"px")}}}},getGuess:function(){return this._parseNodelist(this.get("contentBox").get("children"))},getGuessAsString:function(){for(var e=this.getGuess().pieces,t="",i=0;i<e.length;i++){if("QMPlainText"!==e[i].objectType)return null;var n=e[i].text;p.FillInUtils.inputContainsMathMLKeyString(n),t+=n}return t},_attachAllPlugins:function(e){e&&(e.get("children").each(this._attachAllPlugins,this),this._attachPlugins(e))},_attachPlugins:function(e){},_parseNodelist:function(e){for(var t=e.map(this._parseNode,this),i=[],n=0;n<t.length;n++)if(void 0!==t[n])if("QMPlainText"===t[n].objectType){for(var s="";t[n]&&"QMPlainText"===t[n].objectType;)s+=t[n].text,n++;n--,i.push({objectType:"QMPlainText",text:s})}else i.push(t[n]);return{objectType:"QMMessage",pieces:i}},_getAITInfo:function(e){},_parseNode:function(e){return e.test(".mathMLContainer")?this._parseMathMLNode(e):e.test(".aitBlock")?this._parseAitBlockNode(e):e.test(".aitInput")?this._parseAitInputNode(e):e.test(".plainChar")?this._parsePlainCharNode(e):void 0},_parseMathMLNode:function(e){var t,i=e.one(".plainChar");return i&&(t=i.get("text")),{objectType:"QMPlainText",text:t}},_parseAitBlockNode:function(e){if(e&&e.test(".aitBlock")){for(var t=this._getAITInfo(e),i=t.qmComponentName,n=t.aitInputSelectors,s=[],r=0;r<n.length;r++)s.push(this._parseNode(e.one(n[r])));return{objectType:i,children:s}}},_parseAitInputNode:function(e){if(e&&e.test(".aitInput"))return e.test(".parenthesized")?{objectType:"QMParentheses",children:[this._parseNodelist(e.get("children"))]}:this._parseNodelist(e.get("children"))},_preProcessTextForParsing:function(e){return e},_parsePlainCharNode:function(e){if(e&&e.test(".plainChar")){var t=e.get("text");return"uppercase"===e.getStyle("textTransform")&&(t=t.toUpperCase()),{objectType:"QMPlainText",text:t=(t=this._preProcessTextForParsing(t)).replace("Â "," ")}}},isGuessed:function(){var e=this.get("contentBox"),t=e.all(".aitInput");return this._hasAtLeastOneSubstantiveContentNode(e)&&t.every(this._hasAtLeastOneSubstantiveContentNode,this)},_hasAtLeastOneSubstantiveContentNode:function(e){return e.get("children").filter(function(e){return!e.hasClass("hidden")&&!e.hasClass("secret")&&"symPadCursor"!==e.get("id")}).some(this._isGuessedContent,this)},_isGuessedContent:function(e){return i=!(t=e).test(".hidden, .secret, #"+s),n=p.SymPadUtils.isContentWhitespace(t),i&&!n&&!(0!==e.all(".empty")._nodes.length)&&(!e.test(".mathMLContainer")||p.MathMLRenderer.isGuessedMathML(this._parseMathMLNode(e).text));var t,i,n},focus:function(){var e=this.get("contentBox"),t=this._caret,i=this.hasCaret(),n=e.one("div.hidden > .proxy-input");n.focus();var s=n.getDOMNode();s.setActive&&s.setActive(),e.appendChild(t),t.plug(p.NodeBlinker),this._afterCaretMove(i?g:_);var r=this._symPad;r&&(r.set("visible",!0),r.set("fiToEdit",this))},blur:function(){var e=this._caret,t=this._symPad;if(d(e)&&e.remove(!1),this.unselectAll(),this._afterCaretMove(g),t){var i=t.get("fiToEdit");i&&i._yuid===this._yuid&&(t.set("visible",!1),t.set("disabled",!0))}},_insertChars:function(e,t){var i,n;this._preventMultipleInputTypes&&this._preventMultipleInputTypes(e),this.hasSelected()&&this.deleteSelected();var s,r=this._caret;if(d(r)){if(1e3<=(i=r.ancestor()).all(".plainChar")._nodes.length)return;if("mâˆ "===e)this._insertChars("m"),this._insertChars("âˆ ");else if(p.FillInUtils.inputContainsMathMLKeyString(e)){var a;if(this._mathMLRenderer)a=this._mathMLRenderer;else{var o=this._parentWidget?this._parentWidget:{__origCfg__:this._context};a=p.Component.newInstance(o,p.MathMLRenderer,{})}var l=a.getRenderedExpression(e),h=l.appendChild('<div class="plainChar"/>');h.addClass("hidden"),h.set("text",e),i.insertBefore(l,r),f.IXL.DOMAttachAware.attached(l.getData("origCfg")),this._afterCaretMove(c)}else n=f.Node.create('<div class="plainChar"/>')," "===e?n.setHTML("&nbsp;"):(65<=(s=e.charCodeAt(0))&&s<=90||97<=s&&s<=122?n.addClass("alphabetical"):i.ancestor(".segmentName, .lineName, .rayName")&&this._tabToNextAITInput(),n.set("text",e)),t&&n.addClass(t),i.insertBefore(n,r),this._afterCaretMove(g)}},_isButtonEnabled:function(e){var t;return this._computeDepthOfCaretOrSelection()>this.get("maxNumNests")?!e.nests():(t=this._getButtonsToDisable(),f.Array.indexOf(t,e.name)<0)},_alignVFrac:function(){var e=this._parentNode;e&&e.all(".vFrac").getDOMNodes().reverse().forEach(function(e){var t=(e=f.one(e)).get("firstChild"),i=e.get("lastChild");if(t&&t.hasClass("numerator")&&i&&i.hasClass("denominator")&&t.get("region").height!==i.get("region").height){i.setStyle("paddingBottom",""),t.setStyle("paddingTop","");var n=t.get("region").height,s=i.get("region").height;s<n?i.setStyle("paddingBottom",n-s):n<s&&t.setStyle("paddingTop",s-n)}})},_updateNodeStates:function(){var e=this._caret,t=this.getParentSelectedItems();this._alignVFrac(),d(e)&&e.ancestor(".yui3-sympadfiwidget")?(this._updateUpward(e.ancestor()),this.fire("resizeSymbolPad")):0<t.size()&&(t.each(function(e){this._updateUpward(e.ancestor())},this),this.fire("resizeSymbolPad"))},_updateSubtreeStates:function(e){e&&(e.get("children").each(function(e){this._updateSubtreeStates(e)},this),this._updateSingleNode(e),this.fire("resizeSymbolPad"))},_updateUpward:function(e){e&&(this._updateSingleNode(e),e.test(".yui3-sympadfiwidget")||this._updateUpward(e.ancestor()))},_updateSingleNode:function(e){e&&(e.hasPlugin("emptyNodeTracker")&&e.emptyNodeTracker.verifier(),e.hasPlugin("symbolResizer")&&e.symbolResizer.resize(),e.hasPlugin("radicalResizer")&&e.radicalResizer.resize(),e.hasPlugin(p.TriggerParenResizerPlugin.NAME)&&e.triggerParenResizerPlugin.resize())},_handleTabKeyFromDummyInput:function(e){var t=f.Widget.getByNode(this);e&&9===e.keyCode&&t._tabToNextAITInput()&&e.halt()},unselectAll:function(){this.getAllSelected().removeClass("selection")},deleteSelected:function(){var e=this.getParentSelectedItems();if(e&&0<e.size()){var t=e.size(),i=this._caret;e.item(t-1).replace(i),i.plug(p.NodeBlinker),e.remove(!0),this._updateNodeStates()}},hasSelected:function(){var e=this.getAllSelected();return e&&0<e.size()},proxyInput:function(){return this.get("contentBox").one("div.hidden > .proxy-input")},hasFocus:function(){return this.get("contentBox").one("#"+s)},getAllSelected:function(){return this.get("contentBox").all(".selection")},getParentSelectedItems:function(){return this.getAllSelected().filter(this.isParentSelection)},isParentSelection:function(e){return!e.ancestor(".selection")&&e.test(".aitBlock, .plainChar")},clearContent:function(e){var t=this.get("contentBox"),i=t.all(".aitBlock, .plainChar, .mathMLContainer");0<i.size()&&(t.insert(this._caret,i.item(0)),this._caret.plug(p.NodeBlinker)),i.remove(!0),e||this._afterCaretMove(g)},setContentToStringBlock:function(e){this.clearContent(),f.bind(k,this)(e),this._afterCaretMove(g)},_tabToNextAITInput:function(){var e,t,i,n=this._caret;if(d(n)?t=n:0<(e=this.getParentSelectedItems()).size()&&(t=e.item(e.size()-1)),t){if(this.unselectAll(),i=this._findNextAitInputToRight(t))return a(i,n),this._afterCaretMove(g),i;var s=t.ancestor().ancestor(".aitBlock");return s?(A(n,s),this._afterCaretMove(g),s):void this.blur()}},_findNextAitInputToRight:function(e){var t,i,n,s,r=[];if(e){for(t=e.next(".aitBlock");t;){if(i=this._findFirstAitInputInside(t))return i;t=t.next(".aitBlock")}if((s=e.ancestor(".aitInput"))&&(n=s.ancestor(".aitBlock"))){r=this._getListOfAitInputs(n);var a=f.Array.indexOf(r,s);if(a!==r.length-1)return r[a+1]}}},_getListOfAitInputs:function(e){var t=[];return e?e.test(".aitInput")?[e]:(e.get("children").each(function(e){t=t.concat(this._getListOfAitInputs(e))},this),t):[]},_findFirstAitInputInside:function(e){var t,i=[];if(e)for(e.get("children").each(n);0<i.length;){if((t=i.shift()).test(".aitInput"))return t;t.get("children").each(n)}function n(e){i.push(e)}},_handleBackspace:function(e){var t=this._caret;if(this.hasSelected())return this.deleteSelected(),void this._afterCaretMove(g);if(d(t)){var i=y(t);i&&i.test(".plainChar")&&(i.ancestor().removeChild(i.getDOMNode()),this._afterCaretMove(g))}},_handleDelete:function(e){if(0<this.getAllSelected().size())return this.deleteSelected(),void this._afterCaretMove(g);var t=this._caret;if(d(t)){var i=I(t);i&&i.test(".plainChar")&&(i.ancestor().removeChild(i.getDOMNode()),this._afterCaretMove(g))}},_handleRightArrow:function(e){var t=this._caret;if(d(t)){var i=I(t);return i&&i.test(".plainChar")&&A(t,i),void this._afterCaretMove(g)}var n=this.getAllSelected();if(0<n.size())return A(t,n.item(n.size()-1)),N(this),void this._afterCaretMove(g)},_handleLeftArrow:function(e){var t=this.getAllSelected();if(0<t.size()){var i=t.item(0);return i.ancestor().insertBefore(this._caret,i),N(this),void this._afterCaretMove(g)}var n=this._caret;if(d(n)){var s=y(n);s&&s.test(".plainChar")&&(s.ancestor().insertBefore(n,s),this._afterCaretMove(g))}},_handleUpArrow:function(e){},_handleDownArrow:function(e){},_handleCaret:function(e){},_handleUnderscore:function(e){},_handleMousedown:function(e){if(!this.get("disabled")){var t=this.get("contentBox"),i=this._caret,n=this._symPad,s=this.hasCaret();N(this);var r=e.pageX,a=e.pageY,o=t.get("children"),l=this._findProbablyClicked(o,r,a);if(l){if(l.test(".aitBlock")){var h=this._findProbablyClickedRecursive(t,r,a);h&&(l=h)}this._mousedownWithNode(l,r,a)}else{var d=o.item(2);d&&d.get("region").left>r-10?t.insert(i,2):t.appendChild(i)}i.plug(p.NodeBlinker),this._afterCaretMove(s?g:_),e.target.ancestors(null,!0).addClass("mousedownInside");var c=f.bind(T,this)(t,e.pageX),u=f.one("html");u.once("mouseup",F,this,c),f.UA.ios?e.preventDefault():u.once("mouseup",v,this),n&&n.set("disabled",!1),f.UA.mobileapp||this._notifyOfSympadUp()}},handleMousedownHTML:function(e){var t=this._symPad,i=e.target;this.get("boundingBox").contains(i)?this._handleMousedown(e):t&&t.get("boundingBox").contains(i)||(this.blur(),n.getCurrentFocusedFillIn()===this._getFillInNode()&&n.blurFocusedFillIn())},_notifyOfSympadUp:function(){var e=this._symPad;e&&(e.set("visible",!0),e.set("fiToEdit",this))},_findProbablyClicked:function(e,i,t){return e.find(function(e){if(e.test(".hidden, .secret"))return!1;var t=e.get("region");return e.test(".aitBlock")?i+0>=t.left&&i-0<=t.right:i>=t.left&&i<=t.right})},_findProbablyClickedRecursive:function(e,t,i){var n,s,r,a=e.get("children");for(r=0;r<a.size();r++)if(n=a.item(r),s=this._findProbablyClickedRecursive(n,t,i))return s;if(e.test(".aitInput")&&this._isInAitInputNode(e,t,i)||this._isInPlainCharNode(e,t,i)&&e.test(".plainChar"))return e},_isInNode:function(e,t,i){var n;if(e){return t+0>=(n=e.get("region")).left&&t-0<=n.right&&i>n.top&&i<=n.bottom}return!1},_isInAitInputNode:function(e,t,i){var n;if(!e||!e.test(".aitInput"))return!1;if(t>(n=e.get("region")).left&&t<n.right&&i>n.top&&i<=n.bottom)return!0;if(this._isInAitInputHalo(e,t,i)){if(this._isRegionThin(n))return!0;var s=e.ancestor(".aitInput");return!this._isInAitInputNode(s,t,i)}return!1},_isRegionThin:function(e){if(e&&"number"==typeof e.width)return e.width<3},_isInAitInputHalo:function(e,t,i){var n,s,r,a;return!(!e||!e.test(".aitInput"))&&(n=e.get("region"),s=this._isRegionThin(n)?4:0,n=e.get("region"),r=Math.abs(t-n.left)<=s||Math.abs(t-n.right)<=s,a=i<=n.bottom&&i>=n.top,r&&a)},_isInPlainCharNode:function(e,t,i){var n;return!!e&&(t>=(n=e.get("region")).left&&t<=n.right&&i<=n.bottom+3&&i>=n.top-3)},_mousedownWithNode:function(e,t,i){var n,s,r;if(e)if(s=(n=e.get("region")).left,r=n.right,e.test(".plainChar"))this._mouseDownWithPlainCharNode(e,t);else if(e.test(".aitInput"))this._mouseDownWithAitInputNode(e,t,i);else if(e.test(".aitBlock")){Math.abs(t-s)<=10?e.ancestor().insertBefore(this._caret,e):Math.abs(t-r)<=10&&A(this._caret,e)}},_mouseDownWithPlainCharNode:function(e,t){var i,n;e&&e.test(".plainChar")&&(t<(n=(i=e.get("region")).left)+(i.right-n)/2?e.ancestor().insertBefore(this._caret,e):A(this._caret,e))},_mouseDownWithAitInputNode:function(e,t,i){var n,s,r;e&&e.test(".aitInput")&&(s=(n=e.get("region")).left,r=n.right,n.width<3?a(e,this._caret):Math.abs(t-s)<=Math.abs(t-r)?a(e,this._caret):e.appendChild(this._caret))},_afterCaretMove:function(){var e=this._caret,t=this.get("contentBox");this.ensureVisibleCaret(),r(this),this._updateNodeStates(),this._fixSymPadDisability(),(t.contains(e)||t.one(".selection"))&&this._fixSymPadNestability()},ensureVisibleCaret:function(){var e,t,i=this.get("boundingBox"),n=this.get("contentBox"),s=this._caret,r=i.get("region"),a=s.get("region");d(s)&&(e=parseInt(n.getStyle("left"),10),f.Lang.isValue(e)||(e=0),a.right<r.left?(t=e+r.left-a.left+2,n.setStyle("left",t)):a.right>r.right?(t=e+r.right-a.right-5,n.setStyle("left",t)):e<0&&(t=Math.min(0,e+r.right-a.right-5),n.setStyle("left",t)))},_fixSymPadNestability:function(){var e,t=this._symPad;t&&(e=this._computeDepthOfCaretOrSelection()>this.get("maxNumNests")?["ait.nests"]:this._getButtonsToDisable(),t.set("buttonsToDisable",e))},_computeDepthOfCaretOrSelection:function(){var e,t=this._caret,i=this.getParentSelectedItems();if(d(t)&&f.Widget.getByNode(t)===this)e=t.ancestors(b).size();else if(0<i.size()){var n=this.getAllSelected();e=0===n.size()?0:function(e){for(var t=-1,i=0;i<e.size();i++){var n=e.item(i),s=C(n.get("children"));n.test(b)&&s++,t<(s+=n.ancestors(b).size())&&(t=s)}return t}(n)}else e=0;return e},_getButtonsToDisable:function(){var e=this._caret,t=this.getParentSelectedItems();return this._disableNestingRules?[]:d(e)&&0===t.size()?this._getForbiddenAITBasedOnCursor(e):0<t.size()?this._getForbiddenAITBasedOnSelection(t):[]},_getForbiddenAITBasedOnCursor:function(e){var t=[];if(!d(e))return t;for(var i=e.ancestor(".aitBlock"),n=e.ancestor(".aitInput");n;)t=t.concat(this._getForbiddenAITDescendents(n)),n=n.ancestor(".aitInput");return i&&(i.test(".parenthesesAIT")||i.test(".absoluteValueAIT"))?t.concat(this._getForbiddenAITBasedOnCursor(e.ancestor())):t.concat(this._getForbiddenAITChildren(e.ancestor()))},_getForbiddenAITBasedOnSelection:function(e){var t,i,n=[];if(!e||0===e.size())return n;for(i=0;i<e.size();i++)if(t=e.item(i),n=(n=n.concat(this._getForbiddenAITParents(t))).concat(this._getForbiddenAITChildren(t.ancestor())),t.test(".parenthesesAIT")||t.test(".absoluteValueAIT")){var s=t.one(".aitInput").get("children");n=n.concat(this._getForbiddenAITBasedOnSelection(s))}for(var r=e.item(0).ancestor(".aitInput");r;)n=n.concat(this._getForbiddenAITDescendents(r)),r=r.ancestor(".aitInput");var a=new f.NodeList;e.each(function(e){a=a.concat(e.all(".aitBlock"))});var o=this;return a.each(function(e){n=n.concat(o._getForbiddenAITAncestors(e))}),n=f.Array.dedupe(n)},_getForbiddenAITChildren:function(e){return[]},_getForbiddenAITDescendents:function(e){return[]},_getForbiddenAITAncestors:function(e){return[]},_getForbiddenAITParents:function(e){var t=[];return e.test(".alphabetical")||(t=t.concat(["lineAIT","segmentAIT","rayAIT"])),t},_fixSymPadDisability:function(){var e=this._caret,t=this._symPad;t&&d(e)&&t.set("disabled",!1)},_copy:function(e){e&&e.halt(!0);var t=this.getParentSelectedItems();U._clipboard=t.map(m)},_paste:function(e){var i,t,n,s=this._caret,r=U._clipboard;e&&e.halt(!0),r&&(d(s)?i=s:0<(t=this.getParentSelectedItems()).size()&&(i=t.item(0)),i&&this._verifyNestingForPaste(i)&&(n=i.ancestor(),f.Array.each(r,function(e){var t=n.insertBefore(e.cloneNode(!0),i);t.all(".rayNameSymbol, .lineNameSymbol, .radical").each(function(e){e.empty(),p.GraphicsDrawer.renderShape(e)}),this._attachAllPlugins(t),this._updateSubtreeStates(t)},this),n.insertBefore(s,i),this._afterCaretMove(g)))},_verifyNestingForPaste:function(e){var t,i,n=U._clipboard;if(!n||!e)return!1;if(e.ancestors(b).size()+C(n)>this.get("maxNumNests")+1)return!1;if((t=this._getButtonsToDisable())&&0<t.length){i=p.SymPadUtils.classNameArrayToSelector(t);for(var s=0;s<n.length;s++)if(n[s].test(i))return!1}return!0}},{_clipboard:null,getPrev:y,insertChars:k,fixHasCursorCSS:r}),p.SymPadFIWidget=U},"@VERSION@",{requires:["base","node","array-extras","array-invoke","node-event-delegate","event","event-key","widget","node","json","q-DynamicFIPlugin","q-FillInUtils","q-NodeBlinker","q-XRegionEvents","q-GraphicsDrawer","q-AITUtils","q-BlankAITInputParserPlugin","q-AITUtils","q-TriggerParenResizerPlugin","q-SymPadUtils","q-MathMLRenderer","q-Message","q-ObjectUtils","yui-gallery-nodelist-extras","yui-gallery-nodelist-extras2","ixl_content_util_fillIn_FillInNavigationController","ixl_content_util_YUA"]});
YUI.add("q-CoordinateListDrawingUtils",function(g){var t=g.namespace("IXL");t.CoordinateListDrawingUtils={renderWithCustomClassNames:function(e,r,t,d,n,a,i,s){var o=e.appendChild('<div class="expression '+a+'"/>');t._parentNode=o,t.render();var p,c=o.appendChild('<div class="expression '+i+'"/>');for(d._parentNode=o,d.render(),r[0]._parentNode=c,r[0].render(),p=1;p<r.length;p++){var l=c.appendChild('<div class="expression '+s+'"/>');r[p-1]._parentNode.one(".vFrac")&&l.addClass("forFraction"),n._parentNode=l,n.render(),r[p]._parentNode=c,r[p].render()}o.all(".yui3-sympadfiwidget").each(function(e){g.Widget.getByNode(e).addTarget(o)}),o.on("symPadFIWidget:resizeSymbolPad",function(e){var r=o.get("children"),n=r.item(0),a=r.item(r.size()-1),i=e.target.get("srcNode").ancestor(".innerPoint").get("region").height;t._redraw(n,i,!0),d._redraw(a,i,!1)},this)},render:function(e,r,n,a,i){t.CoordinateListDrawingUtils.renderWithCustomClassNames(e,r,n,a,i,"point","innerPoint","pointSeparator")}}},"@VERSION@",{requires:["base","node","array-extras","q-Component","q-DOMAttachAware","q-SymPadFIWidget","q-css-Expression","q-css-CoordinateListDrawingUtils"]});
YUI.add("q-QMPoint",function(t){var r=t.namespace("IXL"),e=r.Intl.getModule("q-QMPoint");r.QMPoint=t.Base.create("point",r.Component,[r.DOMAttachAware],{render:function(){var t=this._parentNode,o=this.get("leftBoundSymbol"),e=this.get("coords"),n=this.get("separator"),i=this.get("rightBoundSymbol");r.CoordinateListDrawingUtils.render(t,e,o,i,n)},getNumChildComponents:function(){return 0},getChildComponent:function(t){throw new Error("QMPoint has no child components.")},setChildComponent:function(t,o){throw new Error("QMPoint has no child components.")},getAudioText:function(t){var o=this.get("coords");return e.getText("audio_text",{x_coordinate:o[0].getAudioText(t),y_coordinate:o[1].getAudioText(t)})}})},"@VERSION@",{requires:["base","node","array-extras","q-CoordinateListDrawingUtils","util-Intl"]});
YUI.add("q-QMCommaSymbol",function(e){var a=e.namespace("IXL");a.QMCommaSymbol=a.ComponentSimple.create("commaSymbol",{render:function(){this._parentNode.appendChild('<span class="commaSymbol"/>').appendChild(",")}})},"@VERSION@",{requires:["base","node","array-extras","q-ComponentSimple"]});
YUI.add("q-Pipe",function(e){var i=e.namespace("IXL");i.Pipe=function(){i.Pipe.superclass.constructor.apply(this,arguments)},i.Pipe.NAME="pipe",e.extend(i.Pipe,e.Shape,{_draw:function(){var e=this.get("width"),i=this.get("height");this.clear(),this.moveTo(e/2,.5),this.lineTo(e/2,i-.5),this.end()}},{ATTRS:e.Shape.ATTRS})},"@VERSION@",{requires:["base","node","array-extras","graphics"]});
YUI.add("q-QMPipeSymbol",function(d){var o=d.namespace("IXL"),r=d.Graphic;o.QMPipeSymbol=d.Base.create("pipeSymbol",o.Component,[o.DOMAttachAware],{shape:o.Pipe,smallSymbol:"|",smallSymbolClass:"smallPipe",bigSymbolClass:"bigPipe",initializer:function(){this._drawnTo=[],this._largeSymbols={}},render:function(){var l=this._parentNode.appendChild("<div/>");this.inDocDo(d.bind(function(){var e=l.ancestor().ancestor();l.ancestor(".point-container")||l.ancestor().setStyles({paddingRight:"0px"});var i=e.one(".leftSideOfPipe"),t=e.one(".rightSideOfPipe");i||(i=l.ancestor().previous()),t||(t=l.ancestor().next());var a=i.get("region").height,s=t.get("region").height,n=Math.max(a,s),o=n>(d.UA.mobileapp?37:26),r=this._nearFillInOrRootOf(i)||this._nearFillInOrRootOf(t);o||r?this._drawLarge(l,n):this._drawWithAscii(l,this.smallSymbol)},this))},_nearFillInOrRootOf:function(e){return e.one(".fillIn")||e.one(".yui3-sympadfiwidget")||e.one(".expression.root")},destructor:function(){d.Object.each(this._largeSymbols,function(e){e.destroy()})},_drawLarge:function(e,i){var t=this.shape;e.addClass(this.bigSymbolClass),e.setStyles({height:i,width:9});var a=o.HTMLUtils.findStrokeFor(e),s=new r({render:e}),n=e.appendChild('<span class="hidden">&nbsp;</span>');n.addClass("hidden"),this._hiddenNode=n.setStyle("lineHeight",i+"px"),e.generateID(),this._largeSymbols[e.get("id")]=s.addShape({type:t,stroke:a,height:i,width:9})},_drawWithAscii:function(e,i){e.addClass(this.smallSymbolClass),e.appendChild(i)}})},"@VERSION@",{requires:["base","node","array-extras","graphics","q-Component","q-Pipe","q-DOMAttachAware","q-HTMLUtils","q-css-PipeSymbol"]});
YUI.add("q-QMPointSeparator",function(e){var a=e.namespace("IXL"),n=(e.Graphic,["de_DE"]);a.QMPointSeparator=e.Base.create("pointSeparator",a.Component,[a.DOMAttachAware],{render:function(){var e,t=this._parentNode,o=this.get("context").languageCode+"_"+this.get("context").countryCode;e=o,-1<n.indexOf(e)?(this._pipe=a.Component.newInstance(this,a.QMPipeSymbol,{}),this._pipe._parentNode=t,this._pipe.render()):(this._comma=a.Component.newInstance(this,a.QMCommaSymbol,{}),this._comma._parentNode=t,this._comma.render())},destructor:function(){this._pipe&&this._pipe.destroy(),this._comma&&this._comma.destroy()}})},"@VERSION@",{requires:["base","node","array-extras","graphics","q-QMPipeSymbol","q-QMCommaSymbol"]});
