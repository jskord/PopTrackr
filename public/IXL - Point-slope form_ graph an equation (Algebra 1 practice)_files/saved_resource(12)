YUI.add('lang/skill-search-SkillSearchBar', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['skill_search_bar.more_results_for'] = 'More results for "{queryWords}"<div class=\'arrow\'> >></div>';
  text['skill_search_bar.results_for'] = 'Results for "{queryWords}"<div class=\'arrow\'> >></div>';
  text['skill_search_bar.no_results'] = 'No results found. Please try a different search.';
  IXL.Intl.addModule('skill-search-SkillSearchBar', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("skill-search-AjaxLogger",function(r){r.namespace("IXL");r.IXL.AjaxLogger=function(e){if(this.containerQuery=e.containerQuery,this.loggingRequestUrl=e.loggingRequestUrl,this.dataFunction=e.dataFunction,this.linkQuery=e.linkQuery,r.Lang.isNumber(e.timeToRedirect)&&0<e.timeToRedirect?this.timeToRedirect=e.timeToRedirect:this.timeToRedirect=100,!(this.containerQuery&&this.loggingRequestUrl&&this.dataFunction&&this.linkQuery))throw new Error("Not all required parameters were supplied. See AjaxLogger.js for details.")},r.IXL.AjaxLogger.prototype.startLogging=function(){r.one(this.containerQuery).delegate("click",r.bind(function(e){var t=function(){r.config.win.location.href=i.getAttribute("href")},i=e.target.ancestor("a",!0),n=r.later(this.timeToRedirect,this,t);r.io(this.loggingRequestUrl,{data:this.dataFunction(i),on:{success:function(){n.cancel(),t()}}});e.halt()},this),this.linkQuery)}},"@VERSION@",{requires:["node","io"]});
YUI.add("skill-search-SkillSearchBar",function(i){i.namespace("IXL");i.publish("io:success",{broadcast:2});var s="active-result",n=require("ixl/util-commonjs/YEscape"),o=i.IXL.Intl.getModule("skill-search-SkillSearchBar"),t="";function c(e,t){var a=i.Node.create("<div class='noResults'>");a.set("text",e),t.appendChild(a)}var e=new i.Template,u=e.compile("<div class='resultHeader'><div class='headerBar'></div><span class='headerText'><%= this.name %></span></div>"),d=e.compile("<a href='<%= this.url %>' data-grade='<%= this.grade %>' data-edition='<%= this.edition %>'><div class='searchResult'><span class='gradeName'><%== this.formattedName %></span></div></a>"),h=e.compile("<a href='<%= this.url %>' data-topicid='<%= this.topicid %>' data-edition='<%= this.edition %>'><div class='searchResult'><span class='topicName'><%== this.formattedName %></span></div></a>"),g=e.compile("<a href='<%= this.url %>' data-skillid='<%= this.skillid %>' data-edition='<%= this.edition %>'><div class='searchResult'><span class='extraDetails'><%== this.grade %></span><span class='skillName'><%== this.formattedName %></span><% if (this.tag) {%> <span class='matchedTag'>Matched \"<%== this.tag %>\"</span><% } %><% else if (this.skillCodeMatch) {%> <span class='matchedSkillCode'>Matched \"<%== this.skillNumber %>\"</span><% } %></div></a>");if(i.UA.ie)var p=e.compile("<div class='ie7-moreResultsContainer'><a class='moreResults' href='<%= this.baseUrl %>/search?q=<%= encodeURIComponent(this.q).replace('%20', '+') %>'><span class='underline'><% if (this.moreResults) { %>More results <% } else { %>Results <% } %> for \"<%= this.q %>\"</span> <span class='arrow'>>></span></a></div>");else p=function(e){var t="<div class='moreResultsContainer'><a class='moreResults' href='"+e.baseUrl+"/search?q="+encodeURIComponent(e.q).replace("%20","+")+"'><span class='underline'>",s="",a=e.q.split(" ");return i.Array.each(a,function(e,t,a){e.length&&(s+="<span class='query-word'>"+n.html(e)+"</span>",t!==a.length-1&&(s+=" "))}),e.moreResults?t+=o.getRaw("skill_search_bar.more_results_for",{queryWords:s}):t+=o.getRaw("skill_search_bar.results_for",{queryWords:s}),t+="</span></a></div>"};var r,l,a=i.one("#searchBar"),f=i.one("#searchBar .skill-search-input"),v=i.one("#searchBar .searchResultsContainer"),m=i.one("#searchBar .searchResults"),y=0,k=!0;function b(){return!k}var R=function(e,t){var a,s;m.set("text","");try{a=JSON.parse(e)}catch(e){return void c("Failed to parse JSON response.",m)}if(D=a.trackingId,C=a.userId,a.noResults)c(o.getText("skill_search_bar.no_results"),m);else{for(var n="<div class='resultsContainer'>",r=0;r<a.bundles.length;r++){0<a.bundles[r].results.length&&a.multipleResultCategories&&("levels"==a.bundles[r].type?n+=u({name:a.textData[a.bundles[r].type]}):n+=u({name:a.bundles[r].header.toLowerCase()}));for(var l=0;l<a.bundles[r].results.length;l++)"levels"==a.bundles[r].type&&(n+=d(a.bundles[r].results[l])),"topics"==a.bundles[r].type&&(n+=h(a.bundles[r].results[l])),"skills"==a.bundles[r].type&&(n+=g(a.bundles[r].results[l]))}n+="</div>",n+=p({q:t,moreResults:a.moreResults,baseUrl:a.baseUrl}),m.setHTML(n)}v.setStyle("display","block"),k=!1,i.Global.fire("mask:swf",{testFn:b}),a.noResults||(s=i.all(".query-word").getDOMNodes(),i.Array.each(s,function(e){for(;e.scrollWidth-1>e.clientWidth&&0<e.clientWidth;)if(e.textContent){var t=e.textContent;e.textContent=t.substring(0,t.length-5)+"..."}else if(e.innerText){var a=e.innerText;e.innerText=a.substring(0,a.length-5)+"..."}}),i.one(s[s.length-1]).addClass("last-query-word"))},w=function(){k||(v.setStyle("display","none"),k=!0,i.Global.fire("mask:swf",{testFn:b}))},q=function(){k&&(v.setStyle("display","block"),k=!1,i.Global.fire("mask:swf",{testFn:b}))};function x(e){var t=m.all("a");y&&t.item(y-1).removeClass(s);var a=t.size()+1;(y=(y+e+a)%a)&&t.item(y-1).addClass(s)}v.setStyle("display","none"),a.on("submit",function(e){return 0===f.get("value").length?(e.preventDefault(),e.stopPropagation(),!1):!y||(e.preventDefault(),e.stopPropagation(),m.one("."+s).getDOMNode().click(),!1)}),i.Node.DOM_EVENTS.key.eventDef.KEY_MAP.arrowdown=40,i.Node.DOM_EVENTS.key.eventDef.KEY_MAP.arrowup=38,f.on("key",function(e){f.get("value").length<2||(k?q():(e.preventDefault(),x(1)))},"arrowdown"),f.on("key",function(e){e.preventDefault(),x(-1)},"arrowup"),f.on("key",function(e){""===f.get("value")||k||e.ctrlKey||(e.preventDefault(),x(e.shiftKey?-1:1))},"tab"),f.on("key",function(e){e.preventDefault(),w()},"esc");var C=-1,D="";f.after("valueChange",function(a){t=a.newVal,y&&(m.one("."+s).removeClass(s),y=0),r&&r.cancel(),l&&l.abort(),r=i.later(100,this,function(){a.newVal&&2<=a.newVal.length&&(!a.prevVal||i.Lang.trim(a.newVal)!==i.Lang.trim(a.prevVal))?l=i.io("/search/quickbarSearch",{data:{q:a.newVal},on:{success:function(e,t){R(t.responseText,a.newVal),l=null}}}):a.newVal||w(),r=null})}),(i.UA.ios?i.all("body > *"):i.one("body")).after("click",function(e){var t=e.target;t.ancestor&&t.ancestor("#searchBar")?k&&1<f.get("value").length&&(m.get("text")&&0<m.get("text").length?q():(l&&l.abort(),l=i.io("/search/quickbarSearch",{data:{q:f.get("value")},on:{success:function(e,t){R(t.responseText,f.get("value")),l=null}}}))):w()},this),i.UA.safari&&f.addClass("safariTextField"),new i.IXL.AjaxLogger({containerQuery:".searchResults",loggingRequestUrl:"/search/logSearchResult",linkQuery:"a[data-grade]",dataFunction:function(e){return{q:t,type:"grade",id:e.getData("grade"),edition:e.getData("edition"),searchType:"autocomplete",userId:C,trackingId:D}}}).startLogging(),new i.IXL.AjaxLogger({containerQuery:".searchResults",loggingRequestUrl:"/search/logSearchResult",linkQuery:"a[data-topicid]",dataFunction:function(e){return{q:t,type:"topic",id:e.getData("topicid"),edition:e.getData("edition"),searchType:"autocomplete",userId:C,trackingId:D}}}).startLogging(),new i.IXL.AjaxLogger({containerQuery:".searchResults",loggingRequestUrl:"/search/logSearchResult",linkQuery:"a[data-skillid]",dataFunction:function(e){return{q:t,type:"skill",id:e.getData("skillid"),edition:e.getData("edition"),searchType:"autocomplete",userId:C,trackingId:D}}}).startLogging()},"@VERSION@",{requires:["node","node-screen","event-valuechange","io","querystring-stringify-simple","template","event-key","skill-search-AjaxLogger","util-Intl"]});
