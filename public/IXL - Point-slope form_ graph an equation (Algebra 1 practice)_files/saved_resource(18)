YUI.add('lang/practice-IncompleteAnswerPopover', function(Y) {
  var IXL = Y.namespace('IXL');
  var text = {};
  text['incomplete_answer_popover.button.submit'] = 'Submit';
  text['incomplete_answer_popover.message.fill_in'] = 'You did not type an answer. Do you want to go back to the question?';
  text['incomplete_answer_popover.button.go_back'] = 'Go back';
  text['incomplete_answer_popover.header.incomplete_answer'] = 'Incomplete answer';
  text['incomplete_answer_popover.message.multiple_select'] = 'You did not choose the correct number of answers. Do you want to go back to the question?';
  text['incomplete_answer_popover.message.multiple_choice'] = 'You did not choose an answer. Do you want to go back to the question?';
  text['incomplete_answer_popover.message.default'] = 'You did not finish the question. Do you want to go back to the question?';
  IXL.Intl.addModule('practice-IncompleteAnswerPopover', text);
}, '@VERSION@', {'requires':['ixl_content_util_YLang', 'ixl_util-commonjs_YEscape', 'ixl_util-commonjs_Intl', 'util-Intl']});
YUI.add("practice-IncompleteAnswerPopoverButton",function(e){var t=e.namespace("IXL"),n=require("ixl/external/react/react"),i=require("ixl/content/util/hoc/withAudioPlaying"),o=require("ixl/external/react/prop-types"),r=require("ixl/content/util/join-classes"),u={buttonText:o.string.isRequired,handleClick:o.func.isRequired,addAudioWrapper:o.func.isRequired,audioComponentInfo:o.object.isRequired,audioEnabled:o.bool.isRequired,getIsAudioPlayingState:o.func.isRequired,audioPaths:o.string,setRef:o.func,isSecondary:o.bool},a=function(e){var t=r({"crisp-button":!0,"crisp-button-cancel":e.isSecondary,"crisp-button-audio-playing":e.getIsAudioPlayingState()}),i=n.createElement("button",{type:"button",className:t,ref:e.setRef,onClick:e.handleClick},e.buttonText);return e.audioEnabled?e.addAudioWrapper(i,e.audioComponentInfo,e.buttonText,e.audioPaths):i};a.propTypes=u,a.defaultProps={setRef:null,isSecondary:!1},t.IncompleteAnswerPopoverButton=i(a)},"@VERSION@",{requires:[]});
YUI.add("practice-IncompleteAnswerPopover",function(e){var t=e.namespace("IXL"),m=require("ixl/external/react/react"),i=require("ixl/external/react/reactDom"),a=require("ixl/external/react/prop-types"),o=require("ixl/external/react/create-react-class"),r=require("ixl/util-commonjs/Intl"),h=require("ixl/product-components/IxlModal"),n=require("ixl/content/util/ReactAudioWrapper"),d=t.AudioUtils,I=t.AudioHTMLUtils,s=require("ixl/content/util/audio/AudioPolicyConstants"),u=t.AnswerAction,w=t.IncompleteAnswerPopoverButton,A=require("ixl/content/util/join-classes"),g=r.getModule("practice-IncompleteAnswerPopover"),f={MULTIPART:{audioId:d.generateAudioId(),wrapperId:e.guid()},MESSAGE:{audioId:d.generateAudioId(),wrapperId:e.guid()},SUBMIT:{audioId:d.generateAudioId(),wrapperId:e.guid()},CANCEL:{audioId:d.generateAudioId(),wrapperId:e.guid()}},c={SUBMIT:"incompleteAnswer:submit",CANCEL:"incompleteAnswer:cancel",CLOSE:"incompleteAnswer:close"},p={};p[u.DEFAULT]="incomplete_answer_popover.message.default",p[u.FILL_IN]="incomplete_answer_popover.message.fill_in",p[u.MULTIPLE_CHOICE]="incomplete_answer_popover.message.multiple_choice",p[u.MULTIPLE_SELECT]="incomplete_answer_popover.message.multiple_select";var l=function(e){return g.getRaw(p[e])},v=o({displayName:"IncompleteAnswerPopover",getInitialState:function(){return{open:!1,message:"",audioEnabled:!1,audioInfo:{audioLanguage:"",audioCountry:"",audioTimestamp:null,audioGeneratorCode:null,audioPaths:"",usesRecordedAudio:null},gradeLevel:"",windowIsNarrow:this._windowIsNarrow()}},_setCancelButton:function(e){this.cancelButton=e},_submit:function(){e.fire(c.SUBMIT),this._closePopover()},_cancel:function(){e.fire(c.CANCEL),this._closePopover()},_closePopover:function(){e.fire(c.CLOSE),this.setState({open:!1})},openPopover:function(){this.setState({open:!0}),this.cancelButton.focus()},updateMessage:function(e,t){var a=l(e),o=this.props.practiceAudioPaths.warningMessageAudioPaths[e.toUpperCase()],i=t.usesRecordedAudio&&o,r=i?I.formatAudioPathsForHTML(o):"";this.setState({message:a,gradeLevel:t.gradeLevel,audioEnabled:t.audioPolicy.name===s.FrontendAudioPolicyEnum.ENABLED,audioInfo:{audioLanguage:t.languageCode,audioCountry:t.countryCode,audioTimestamp:t.timestamp,audioGeneratorCode:t.generatorCode,audioPaths:r,usesRecordedAudio:i}})},addAudioWrapper:function(e,t,a,o){return m.createElement(n,{audioId:t.audioId,wrapperId:t.wrapperId,buttonId:"practice-audio-button-"+t.audioId,hideButton:!0,audioText:a,audioPaths:o,audioLanguage:this.state.audioInfo.audioLanguage,audioCountry:this.state.audioInfo.audioCountry,audioGradeLevel:this.state.gradeLevel,timestamp:this.state.audioInfo.audioTimestamp,generatorCode:this.state.audioInfo.audioGeneratorCode,content:e})},_addMultipartAudioWrapper:function(e){return m.createElement(n,{audioId:f.MULTIPART.audioId,wrapperId:f.MULTIPART.wrapperId,buttonId:"practice-audio-button-"+f.MULTIPART.audioId,hideButton:!1,audioLanguage:this.state.audioInfo.audioLanguage,audioCountry:this.state.audioInfo.audioCountry,audioGradeLevel:this.state.gradeLevel,timestamp:this.state.audioInfo.audioTimestamp,generatorCode:this.state.audioInfo.audioGeneratorCode,content:e,wrapperClass:"practice-audio-wrapper practice-audio-wrapper-first practice-audio-multipart-wrapper",buttonClass:"practice-audio-button practice-audio-multipart-button"})},_windowIsNarrow:function(){return window.matchMedia("(max-width: 480px)").matches},_handleResize:function(){var e=this._windowIsNarrow();this.state.windowIsNarrow!==e&&this.setState({windowIsNarrow:e})},componentDidMount:function(){window.addEventListener("resize",this._handleResize)},render:function(){var e="incomplete-answer-popover-hd",t="incomplete-answer-popover-bd",a=A({bd:!0,"play-multipart-audio-on-click":!0,"lower-grade":this.state.gradeLevel<="C"}),o=m.createElement("span",null,this.state.message),i=g.getRaw("incomplete_answer_popover.button.go_back"),r=g.getRaw("incomplete_answer_popover.button.submit"),n=this.props.practiceAudioPaths.buttonAudioPaths,d=this.state.audioInfo.usesRecordedAudio?I.formatAudioPathsForHTML(n.GO_BACK):"",s=m.createElement(w,{key:"cancelButton",buttonText:i,handleClick:this._cancel,addAudioWrapper:this.addAudioWrapper,audioComponentInfo:f.CANCEL,audioEnabled:this.state.audioEnabled,audioPaths:d,setRef:this._setCancelButton}),u=this.state.audioInfo.usesRecordedAudio?I.formatAudioPathsForHTML(n.SUBMIT):"",c=m.createElement(w,{key:"submitButton",buttonText:r,handleClick:this._submit,addAudioWrapper:this.addAudioWrapper,audioComponentInfo:f.SUBMIT,audioEnabled:this.state.audioEnabled,audioPaths:u,isSecondary:!0}),p=this.state.windowIsNarrow?[c,s]:[s,c],l=m.createElement("div",{className:"incomplete-answer-popover-content"},m.createElement("div",{className:a,id:t},this.state.audioEnabled?this.addAudioWrapper(o,f.MESSAGE,this.state.message,this.state.audioInfo.audioPaths):o),m.createElement("div",{className:"ft no-audio-on-click"},m.createElement("div",{className:"button-group"},p)));return m.createElement(h,{open:this.state.open,showCloseButton:!0,closeCallback:this._cancel,extraClassName:"yui-flow-dialog incomplete-answer-popover",ariaLabelledBy:e,ariaDescribedBy:t},m.createElement("div",{className:"hd",id:e},g.getRaw("incomplete_answer_popover.header.incomplete_answer")),this.state.audioEnabled?this._addMultipartAudioWrapper(l):l)}}),C={practiceAudioPaths:a.object.isRequired,setPopoverRef:a.func.isRequired},E=function(e){return m.createElement(v,{practiceAudioPaths:e.practiceAudioPaths,ref:e.setPopoverRef})};E.propTypes=C,t.IncompleteAnswerPopoverEvent=c,t.getIncompleteAnswerWarningMessage=l,e.namespace("IXL").renderIncompleteAnswerPopover=function(e,t,a){var o=m.createElement(E,{practiceAudioPaths:t,setPopoverRef:a});i.render(o,e)}},"@VERSION@",{requires:["practice-IncompleteAnswerPopoverButton","q-AudioUtils"]});
YUI.add("practice-IncompleteAnswerPopoverContainer",function(e){e.namespace("IXL").IncompleteAnswerPopoverContainer=e.Base.create("incompleteAnswerPopoverContainer",e.Widget,[e.WidgetParent],{renderUI:function(){var t=this;e.IXL.renderIncompleteAnswerPopover(this.get("contentBox").getDOMNode(),this.get("practiceAudioPaths"),function(e){t._setPopoverRef(e)})},_setPopoverRef:function(e){this.popover=e},getPopover:function(){return this.popover}},{ATTRS:{practiceAudioPaths:{writeOnce:"initOnly"}}})},"@VERSION@",{requires:["base","widget","widget-parent","practice-IncompleteAnswerPopover"]});
YUI.add("practice-SmartScoreOutOfDate",function(e){var t=e.namespace("IXL"),n=t.React.getReactInstance(),a=t.React.getReactDOM(),o=require("ixl/external/react/create-react-class"),l=require("ixl/product-components/IxlModal"),s=o({getInitialState:function(){return{open:!1,dialogJson:null}},render:function(){var e=null,t=null,a=null;return this.state.dialogJson&&(e=this.state.dialogJson.header,t=this.state.dialogJson.body,a=this.state.dialogJson.buttons[0]),n.createElement(l,{open:this.state.open,closeCallback:this.closeDialog,showCloseButton:!1},n.createElement("div",{className:"smartscore-outdated-dialog"},n.createElement("div",{className:"hd"},e),n.createElement("div",{className:"bd",dangerouslySetInnerHTML:{__html:t}}),n.createElement("div",{className:"ft"},n.createElement("span",{className:"button-group"},n.createElement("a",{href:window.location.pathname,className:"crisp-button",onClick:this.submit},a?a.text:null)))))},openDialog:function(e){this.setState({open:!0,dialogJson:e})},closeDialog:function(){this.setState({open:!1})},submit:function(){}}),c=function(){var e=document.createElement("div");document.body.insertBefore(e,document.body.firstChild);var t=n.createElement(s,{});return a.render(t,e)}();e.namespace("IXL").smartScoreOutOfDate={openDialog:function(e){c.openDialog(e)}}},"@VERSION@",{requires:["global-React","practice-css-SmartScoreOutOfDate","ixl_product-components_IxlModal"]});
YUI.add("practice-AudioButtonDelegate",function(l){var t=l.namespace("IXL"),g="practice-audio-button-loading",h="practice-audio-button-playing",d=l.UA.ios||l.UA.android,e=require("ixl/content/util/AudioEventManager"),p=require("ixl/content/util/get-document"),a=l.IXL.IncompleteAnswerPopoverEvent;function i(){}l.mix(i.prototype,{audioManager:null,initializer:function(){var n=this,t="gesturemovestart";d&&(t="touchend");var r,o,i,c,u=function(t,e,a){var i=t.getAttribute("data-practice-audio-id"),r=this._searchForId("practice-audio-button-"+i),o=r===e;a?this._playWrappersInSequence(a.wrappers,a.outerButton,a.id,a.isButtonClick):n._handleAudio(r,i,o)}.bind(this);d&&(this.get("contentBox").delegate("touchstart",function(t){1<t.touches.length||(r=0,o=Date.now(),i=t.changedTouches[0].pageX,c=t.changedTouches[0].pageY)}.bind(this),".practice-audio-wrapper"),this.get("contentBox").delegate("touchmove",function(t){if(!(4<r)){var e=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY;null!==i&&null!==c&&(r+=Math.sqrt(Math.pow(e-i,2)+Math.pow(a-c,2))),i=e,c=a}}.bind(this),".practice-audio-wrapper")),this.get("contentBox").delegate("keydown",function(t){if(32===t.keyCode){t.preventDefault(),t.stopPropagation();var e=t.currentTarget.get("parentNode"),a=this._getEventDirectivesForSpecialGCs(e,t.target,!0);this._shouldIgnoreEvent(e,t.target)||a&&a.dropEvent||u(e,t.target,a)}}.bind(this),".practice-audio-button:not(.qg3-audio-button)"),this.get("contentBox").delegate(t,function(t){if(d&&(600<=Date.now()-o||4<=r))return;var e=l.one(t.currentTarget),a=this._getIsButtonClick(t),i=this._getEventDirectivesForSpecialGCs(e,t.target,a);this._shouldIgnoreEvent(e,t.target)||i&&i.dropEvent||(t.preventDefault(),i&&t.stopPropagation(),u(e,t.target,i))}.bind(this),".practice-audio-wrapper"),this.get("contentBox").delegate("click",function(t){t.preventDefault()},".practice-audio-button:not(.qg3-audio-button)"),this.after("widget:contentUpdate",this._stopAudio,this),this._popoverCloseHandle=l.after(a.CLOSE,this._stopAudio,this),this.stopAudioEvent=function(t){t.detail.containers.forEach(function(t){var e=l.one(t),a=e.ancestor(".practice-audio-wrapper");(e.one("."+h)||a&&a.one("."+h))&&n._stopAudio()})},p().addEventListener("AudioButtonDelegate:stopMultipartAudioOnNode",this.stopAudioEvent),this.stopAudioOnNode=function(t){n._stopAudio(!0)},p().addEventListener(e.STOP_EVENT_NAME,this.stopAudioOnNode),this.visibilityChangeHandler=function(){p().hidden&&n._stopAudio()},p().addEventListener("visibilitychange",this.visibilityChangeHandler,!1)},destructor:function(){this._stopAudio(),p().removeEventListener("AudioButtonDelegate:stopMultipartAudioOnNode",this.stopAudioEvent),p().removeEventListener(e.STOP_EVENT_NAME,this.stopAudioOnNode),p().removeEventListener("visibilitychange",this.visibilityChangeHandler,!1),this._popoverCloseHandle&&this._popoverCloseHandle.detach()},_shouldIgnoreEvent:function(t,e){if(null!==e.ancestor(".no-audio-on-click",!0)||null!==e.ancestor(".play-audio-on-click",!0))return null===e.ancestor(".play-audio-on-click",!0);if(null!==t.ancestor(".practice-audio-multipart-wrapper",!0)&&null!==t.ancestor(".practice-audio-multipart-element",!0))return!0;if("INPUT"===e.get("tagName"))return!0;var a=t.getAttribute("data-practice-audio-id");return!this._searchForId("practice-audio-button-"+a)||void 0},_getIsButtonClick:function(t){var e,a,i=l.one(t.currentTarget).getAttribute("data-practice-audio-id"),r=this._searchForId("practice-audio-button-"+i),o=r===t.target;return t.pageX&&t.pageY?(e=t.pageX,a=t.pageY):t.changedTouches&&(e=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY),r&&!o&&Math.sqrt(Math.pow(r.getX()+r.get("clientWidth")/2-e,2)+Math.pow(r.getY()+r.get("clientHeight")-a,2))<30&&(o=!0),o},_getEventDirectivesForSpecialGCs:function(t,e,a){var i=t.getAttribute("data-practice-audio-id"),r=this._searchForId("practice-audio-button-"+i);if(t.hasClass("practice-audio-multipart-wrapper")&&t.one(".practice-audio-multipart-element"))return a||e.ancestor(".play-multipart-audio-on-click")?{wrappers:n=t.all(".practice-audio-multipart-element:not([practice-audio-location])"),outerButton:r,id:i,isButtonClick:a}:{dropEvent:!0};function o(t){function e(t,e){var a=0,i=l.one(t).ancestor(".dragWrapper").get("region").top,r=l.one(e).ancestor(".dragWrapper").get("region").top;return r<i?a=1:i<r&&(a=-1),a}var a=[];function i(t,e){e.push(t)}l.NodeList.each(t.all(".practice-audio-multipart-element:not([practice-audio-location])"),function(t){i(t,a)});var r=[];l.NodeList.each(t.all(".practice-audio-multipart-element[practice-audio-location='left']"),function(t){i(t,r)}),r.sort(e),r.forEach(function(t){i(t,a)});var o=[];l.NodeList.each(t.all(".practice-audio-multipart-element[practice-audio-location='middle']"),function(t){i(t,o)}),o.sort(e),o.forEach(function(t){i(t,a)});var n=[];l.NodeList.each(t.all(".practice-audio-multipart-element[practice-audio-location='right']"),function(t){i(t,n)}),n.sort(e),n.forEach(function(t){i(t,a)});var c=[];return l.NodeList.each(t.all(".practice-audio-multipart-element[practice-audio-location='outside']"),function(t){i(t,c)}),c.sort(e),c.forEach(function(t){i(t,a)}),l.all(a)}var n,c=t.ancestor(".answer-box");if(c){if(a||e.ancestor(".answer-header")){var u=c.one(".practice-audio-multipart-wrapper");if(c.one(".SelectableTile"))n=c.all(".selected .practice-audio-multipart-element");else if(u&&"TextBuilder"==u.getAttribute("audio-wrapper-contents"))n=c.all(".practice-audio-multipart-element:not([practice-audio-location])");else{if(c.one(".dragAndDropVennDiagramContainer",!0)&&e.ancestor(".circleLabel"))return;n=c.one(".dragAndDropVennDiagramContainer",!0)?o(c.one(".dragAndDropVennDiagramContainer",!0)):c.all(".practice-audio-multipart-element")}return{wrappers:n,outerButton:r,id:i,isButtonClick:a}}return{dropEvent:!0}}if(t.ancestor(".correct-answer-is-header, .correctAnswerHeader")){if(a||e.ancestor(".correct-answer-is-header, .correctAnswerHeader")){var d=t.ancestor(".feedback");return u=d.one(".practice-audio-multipart-wrapper"),{wrappers:n=d.one(".correct-answer .TileMultipleChoices")?d.all(".correct-answer .selected .practice-audio-multipart-element"):u&&"TextBuilder"===u.getAttribute("audio-wrapper-contents")?d.all(".practice-audio-multipart-element:not([practice-audio-location])"):d.all(".correct-answer .practice-audio-multipart-element"),outerButton:r,id:i,isButtonClick:a}}return{dropEvent:!0}}if(e.ancestor(".dragAndDropSortingContainer",!0)&&e.ancestor(".binHeader",!0)){var p=e.ancestor(".bin").index;return{wrappers:n=e.ancestor(".dragAndDropSortingContainer",!0).all(".practice-audio-multipart-element[practice-audio-location='"+p+"']"),outerButton:r,id:i,isButtonClick:a}}if(e.ancestor(".dragAndDropTextMatchingContainer",!0)&&e.ancestor(".answerTableContainer .table .tr",!0)){var s=e.ancestor(".tr").rowNum;if(s||0===s)return{wrappers:n=e.ancestor(".dragAndDropTextMatchingContainer",!0).all(".practice-audio-multipart-element[practice-audio-location='"+s+"']"),outerButton:r,id:i,isButtonClick:a}}return e.ancestor(".textBuilder",!0)?(e.ancestor(".correct-answer",!0)?n=e.ancestor(".feedback",!0).all(".practice-audio-multipart-element:not([practice-audio-location])"):e.ancestor(".itemBankGroupAudio-0",!0)?n=e.ancestor(".textBuilder",!0).all(".practice-audio-multipart-element[practice-audio-location='0']"):e.ancestor(".itemBankGroupAudio-1",!0)?n=e.ancestor(".textBuilder",!0).all(".practice-audio-multipart-element[practice-audio-location='1']"):e.ancestor(".answerLineContainer",!0)&&(n=e.ancestor(".textBuilder",!0).all(".practice-audio-multipart-element[practice-audio-location='2']")),{wrappers:n,outerButton:r,id:i,isButtonClick:a}):e.ancestor(".drag-and-drop-fill-in",!0)&&e.ancestor(".item-bank",!0)?{wrappers:n=e.ancestor(".item-bank",!0).all(".practice-audio-multipart-element[practice-audio-location='item-bank']"),outerButton:r,id:i,isButtonClick:a}:e.ancestor(".dragAndDropVennDiagramContainer",!0)&&!e.ancestor(".circleLabel",!0)?{wrappers:n=o(e.ancestor(".dragAndDropVennDiagramContainer",!0)),outerButton:r,id:i,isButtonClick:a}:void 0},_onPressButNotSwipe:function(r){var o=null,n=null,c=0,u=!0,d=null;this.get("contentBox").delegate("touchstart",function(t){u=!0;var e=l.one(t.currentTarget),a=this._getIsButtonClick(t),i=this._getEventDirectivesForSpecialGCs(e,t.target,a);this._shouldIgnoreEvent(t)||i&&i.dropEvent?u=!1:(o=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY,c=0,d=setTimeout(function(t,e){r(t,e),u=t.prevented,d=null}.bind(this,t,i),600))}.bind(this),".practice-audio-wrapper"),this.get("contentBox").delegate("touchmove",function(t){var e=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY;null!==o&&null!==n&&(c+=Math.sqrt(Math.pow(e-o,2)+Math.pow(a-n,2))),o=e,n=a,4<c&&d&&(clearTimeout(d),d=null,u=!1),u&&t.preventDefault()},".practice-audio-wrapper")},_handleAudio:function(t,e,a){var i=this.get("audioManager");if(i){if(t){var r=t.getAttribute("data-practice-audio-text"),o=t.getAttribute("data-practice-audio-paths");if(r||o){var n=t.getAttribute("data-practice-audio-language"),c=t.getAttribute("data-practice-audio-country"),u=this._getGradeLevel(t),d=t.getAttribute("data-practice-generator-code"),p=t.getAttribute("data-practice-audio-timestamp"),s=[];s.push(this._getAudioObject(e,r,o,n,c,u,d,p,t)),i.toggleSoundPlaylist(s,e)}}}else a&&this.fire("noAudio")},_playWrappersInSequence:function(t,s,l,e){(t=t._nodes).forEach(function(t,e){t.oldPosition=e}),this._sortWrappersAccordingToAudioOrdering(t);var a=this.get("audioManager"),g=this;if(a){var h=null,v=s.getAttribute("data-practice-generator-code"),i=t.map(function(t){var e=t.getAttribute("data-practice-audio-id"),a=g._searchForId("practice-audio-button-"+e),i=a.getAttribute("data-practice-audio-text"),r=a.getAttribute("data-practice-audio-paths"),o=a.getAttribute("data-practice-audio-language"),n=a.getAttribute("data-practice-audio-country"),c=a.getAttribute("data-practice-generator-code")?a.getAttribute("data-practice-generator-code"):v,u=g._getGradeLevel(a),d=a.getAttribute("data-practice-audio-timestamp"),p=g._getAudioObject(l,i,r,o,n,u,c,d,s,a);return h&&t.getAttribute("practice-audio-location")!==h&&(p.delayBefore+=400),h=t.getAttribute("practice-audio-location"),p});if(i.forEach(function(t,e){0<e&&(t.delayBefore+=350)}),s.getAttribute("data-practice-audio-text")||s.getAttribute("data-practice-audio-paths")){var r=s.getAttribute("data-practice-audio-text"),o=s.getAttribute("data-practice-audio-paths"),n=s.getAttribute("data-practice-audio-language"),c=s.getAttribute("data-practice-audio-country"),u=s.getAttribute("data-practice-generator-code"),d=s.getAttribute("data-practice-audio-timestamp"),p=this._getGradeLevel(s);i.splice(0,0,this._getAudioObject(l,r,o,n,c,p,u,d,s))}a.toggleSoundPlaylist(i,l)}else e&&this.fire("noAudio")},_getAudioObject:function(t,e,a,i,r,o,n,c,u,d){var p=this,s=!1;return u.getDOMNode()&&u.getDOMNode().parentNode&&"QMAudioPromptSpeaker"===u.getDOMNode().parentNode.getAttribute("audio-wrapper-contents")&&(s=!0),{id:t,text:e,audioPaths:a,language:i,country:r,gradeLevel:o,delayBefore:0,generatorCode:n,timestamp:c,loadingDelay:s?400:0,load:function(t,e){u.getDOMNode()&&t&&(!s||e)&&(u.addClass(g),u.removeClass(h)),d&&p._dispatchCustomEvent("AudioButtonDelegate:playAudioOnNode",d.getDOMNode())},start:function(){u.getDOMNode()&&(u.removeClass(g),u.addClass(h))},stop:function(t,e){u.getDOMNode()&&(t||e)&&(u.removeClass(g),u.removeClass(h)),d&&p._dispatchCustomEvent("AudioButtonDelegate:stopAudioOnNode",d.getDOMNode())}}},_searchForId:function(t){return this.get("contentBox").one("#"+t)},_getGradeLevel:function(t){var e=t.getAttribute("data-practice-audio-grade-level");return e||(t.ancestor(".lower-audio-grade")?"A":"E")},_stopAudio:function(t){var e=this.get("audioManager");e&&e.stop(t)},_dispatchCustomEvent:function(t,e){var a=p().createEvent("CustomEvent");a.initCustomEvent(t,!0,!1,null),e.dispatchEvent(a)},_sortWrappersAccordingToAudioOrdering:function(t){t.sort(function(t,e){var a=t.getAttribute("practice-audio-ordering"),i=e.getAttribute("practice-audio-ordering");return a&&i?parseInt(a)-parseInt(i):a||i?a?1:-1:t.oldPosition-e.oldPosition})}}),i.ATTRS={audioManager:{value:null}},t.AudioButtonDelegate=i},"@VERSION@",{requires:["array-extras","event-move","event-custom-base","practice-IncompleteAnswerPopover"]});
YUI.add("practice-AudioManagerInitializer",function(i){var e=i.namespace("IXL");function a(){}i.mix(a.prototype,{initializer:function(){var i;if(i=e.AudioManagerInitializerUtils.getAudioManager(),this.set("audioManager",i),!i){var a=this.get("contentBox");a&&a.addClass("practice-audio-disabled")}}}),e.AudioManagerInitializer=a},"@VERSION@",{requires:["array-extras","practice-AudioManager","practice-AudioManagerInitializerUtils"]});
YUI.add("practice-CrateModelAudio",function(i){var t=i.namespace("IXL"),o=require("ixl/content/util/audio/AudioPolicyConstants").FrontendAudioPolicyEnum,e=require("ixl/content/util/audio/AudioSystemNumberConstants");function u(){}i.mix(u.prototype,{initializer:function(){var i=this.get("cargoName");i&&"answer"!=i&&this.after("load",this._addQuestionAudio,this)},_addQuestionAudio:function(){var i=this.get("cargo");i&&i.get("context").audioPolicy.name!==o.DISABLED&&i.get("context").audioSystemNumber===e.OriginalAudioSolution&&t.AudioUtils.addAudio(i)}}),t.CrateModelAudio=u},"@VERSION@",{requires:["q-AudioUtils"]});
YUI.add("practice-FeedbackAudio",function(e){var n=e.namespace("IXL"),d=require("ixl/content/util/audio/AudioPolicyConstants").FrontendAudioPolicyEnum;function t(){}e.mix(t.prototype,{_promptHTML:null,_promptText:null,initializer:function(){"cae"!==this.viewType&&(this.onceAfter("render",this._extractPrompt,this),this._getCorrectAnswerModel().after("load",this._updateAudio,this))},_extractPrompt:function(){var t=this._getPromptContainer();this._promptHTML="<span>"+t.getHTML()+"</span>",this._promptText=e.Lang.trim(t.get("text")).replace(":",", ")},_getCorrectAnswerModel:function(){return this.correctAnswer||this.models.answer},_updateAudio:function(t){var e=this._getCorrectAnswerModel().get("cargo");if(e)if(e.get("context").audioPolicy.name!==d.DISABLED){var r=n.AudioUtils.generateAudioId();n.AudioUtils.addFeedbackSubcomponents(e);var o=n.AudioUtils.isOld(e)?e.get("context").hasAudioSubcomponents?"":t.options.answerAudioText:n.AudioUtils.getAnswerAudioText(e);if(!e.get("context").hasAudioSubcomponents&&!o&&"MATH"!==e.get("context").subject.name)return void this._removePromptWrapper();e.get("context").usesRecordedAudio&&(o=""),n.AudioUtils.addAudioWrapper(e,r),this._addPromptWrapper(r);var i=this.get("contentBox").one(".practice-audio-button");if(i.setAttribute("data-practice-audio-grade-level",e.get("context").gradeLevel),e.get("context").usesRecordedAudio){var a={AAC:"/media/0/qgen_res/general/audio/the_correct_answer_is_uk.m4a",OPUS:"/media/0/qgen_res/general/audio/the_correct_answer_is_uk.opus"};"US"!==e.get("context").countryCode&&"CA"!==e.get("context").countryCode||(a={AAC:"/media/0/qgen_res/general/audio/the_correct_answer_is.m4a",OPUS:"/media/0/qgen_res/general/audio/the_correct_answer_is.opus"}),i.setAttribute("data-practice-audio-paths",encodeURI(JSON.stringify(a))),i.removeAttribute("data-practice-audio-text"),i.removeAttribute("data-practice-audio-language"),i.removeAttribute("data-practice-audio-country")}else i.setAttribute("data-practice-audio-text",this._promptText+o),i.setAttribute("data-practice-audio-language",e.get("context").languageCode),i.setAttribute("data-practice-audio-country",e.get("context").countryCode),i.setAttribute("data-practice-generator-code",e.get("context").generatorCode),i.setAttribute("data-practice-audio-timestamp",e.get("context").timestamp),i.removeAttribute("data-practice-audio-paths");i.addClass("practice-audio-multipart-button")}else this._removePromptWrapper()},_getPromptContainer:function(){return this.get("contentBox").one(".correct-answer-hd, .correctAnswerHeader, .correct-answer-is-header")},_addPromptWrapper:function(t){var e=this._getPromptContainer();if(!e.one(".practice-audio-wrapper")){var r=n.AudioHTMLUtils.createButtonHtml(t,"","",""),o=n.AudioHTMLUtils.createWrapperHtml(!0,t,r+this._promptHTML);e.setHTML(o),n.AudioHTMLUtils.loadAndRenderAudioButtonSVGs(e.one(".practice-audio-button"))}},_removePromptWrapper:function(){var t=this._getPromptContainer();null!==t.one(".practice-audio-wrapper")&&t.setHTML(this._promptHTML)}}),n.FeedbackAudio=t},"@VERSION@",{requires:["q-AudioUtils","q-AudioHTMLUtils"]});
YUI.add("practice-FlashAudio",function(a){a.namespace("IXL").FlashAudio=a.Base.create("flashAudio",a.Base,[],{_swf:null,_ready:!1,_soundMap:null,initializer:function(){var t=a.Node.create('<div id="ttsContainer"></div>');a.one("body").append(t),this._swf=new a.SWF(t,"/flex/quia/math/audio/IXLAudio.swf"),this._soundMap={},this._swf.on("playStarted",function(t){!1===this._soundMap[t.id]&&(this._soundMap[t.id]=!0,this.fire("started"))},this),this._swf.on("playComplete",function(t){t.id in this._soundMap&&(delete this._soundMap[t.id],this.fire("ended"))},this),this._swf.onceAfter("swfReady",function(){this._ready=!0},this)},play:function(t){var i=a.guid("flash-audio-");this._soundMap[i]=!1;var s=a.Array.find(t,this._supportType,this).url;this._callSWF("playAudio",[s,i])},stop:function(){this._callSWF("stopAudio")},setUpPlaylist:function(t){this._nodePlaylist=t},playNextFromPlaylist:function(){var t=this._nodePlaylist.shift();this.play(t)},_supportType:function(t){return"audio/mpeg"===t.type},_callSWF:function(t,i){this._ready?this._swf.callSWF(t,i):this._swf.onceAfter("swfReady",function(){this._swf.callSWF(t,i)},this)}},{canPlay:function(){return a.SWFDetect.isFlashVersionAtLeast(9)},ATTRS:{}})},"@VERSION@",{requires:["array-extras","swf","swfdetect"]});
YUI.add("practice-HTML5Audio",function(i){var e=i.namespace("IXL");e.HTML5Audio=i.Base.create("html5Audio",i.Base,[],{_node:null,_testNode:null,_cleanUpFn:null,initializer:function(){this._testNode=i.Node.create("<audio></audio>").getDOMNode()},play:function(e){var t=this._createAudioYuiNode(e);this._startPlayingNode(t)},setUpPlaylist:function(e){var n=this;this._nodePlaylist=e.map(function(e){var t=n._createAudioYuiNode(e);return t.getDOMNode().play(),t.getDOMNode().pause(),t.getDOMNode().addEventListener("durationchange",n._durationChangeListener=function(){t.readyToPlay=!0,n._isPlaylistReady()&&n._readyToPlay&&n._readyToPlay()}),t}),this._reloadOnTimeout()},_reloadOnTimeout:function(){var e=this,t=i.UA.ios?500:3e3,n=function(){e._isPlaylistReady()?e._testReadyTimeout=null:(t<3e3?t=3e3:t+=1e3,e._testReadyTimeout=setTimeout(n,t),e._nodePlaylist.forEach(function(e){e.readyToPlay||e.getDOMNode().load()}))};e._testReadyTimeout=setTimeout(n,t)},playNextFromPlaylist:function(){var t=this,e=function(){t._readyToPlay=null;var e=t._nodePlaylist.shift();t._startPlayingNode(e)};t._isPlaylistReady()?e():this._readyToPlay=e},_isPlaylistReady:function(){return this._nodePlaylist.every(function(e){return e.readyToPlay})},_createAudioYuiNode:function(e){e=i.Array.filter(e,this._supportType,this);var t=[];t.push("<audio>");for(var n=0,a=e.length;n<a;n++)t.push(i.Lang.sub('<source src="{src}" type="{type}">',{src:i.Escape.html(e[n].url),type:i.Escape.html(e[n].type)}));return t.push("</audio>"),i.Node.create(t.join(""))},_startPlayingNode:function(e){this._node=e.getDOMNode();var t=this,n=function(){t.fire("started")},a=function(){t._cleanUpFn(),t.fire("ended")};this._node.addEventListener("playing",n),this._node.addEventListener("ended",a),this._cleanUpFn=function(){t._node.removeEventListener("playing",n),t._node.removeEventListener("ended",a),t._node.removeEventListener("durationchange",t._durationChangeListener),e.destroy(),t._node=null,t._cleanUpFn=null},this._node.play()},stop:function(){try{this._node.pause(),this._node.currentTime=0}catch(e){}finally{this._cleanUpFn&&this._cleanUpFn(),this._testReadyTimeout&&(clearTimeout(this._testReadyTimeout),this._testReadyTimeout=null),this._readyToPlay=null,this.fire("ended")}},_supportType:function(e){return!!this._testNode.canPlayType(e.type)}},{canPlay:function(){if(i.UA.androidapp)return!1;var e=i.Node.create("<audio></audio>");return!(!((e=e&&e.getDOMNode())&&e.canPlayType&&e.addEventListener)||e.muted)&&!(!e.canPlayType("audio/mpeg;")&&!e.canPlayType('audio/ogg; codecs="vorbis"'))},ATTRS:{}})},"@VERSION@",{requires:["escape"]});
YUI.add("practice-PracticeAudioBackends",function(i){var a=i.namespace("IXL");a.PracticeAudioBackends={getAudioBackends:function(){return[a.HTML5Audio,a.FlashAudio]}},a.AudioManagerInitializerUtils.getAudioBackends=a.PracticeAudioBackends.getAudioBackends},"@VERSION@",{requires:["practice-HTML5Audio","practice-FlashAudio","practice-AudioManagerInitializerUtils"]});
YUI.add("practice-PracticeAudio",function(e){var a=e.namespace("IXL");e.Base.mix(a.PracticeAgent,[a.AudioManagerInitializer,a.AudioButtonDelegate]),e.Base.mix(a.CrateModel,[a.CrateModelAudio]),e.Base.mix(a.Feedback,[a.FeedbackAudio]),e.Base.mix(a.IncompleteAnswerPopoverContainer,[a.AudioManagerInitializer,a.AudioButtonDelegate])},"@VERSION@",{requires:["practice-CrateModel","practice-CrateModelAudio","practice-Feedback","practice-FeedbackAudio","practice-PracticeAgent","practice-AudioButtonDelegate","practice-AudioManagerInitializer","practice-PracticeAudioBackends"]});
YUI.add("practice-PlayTimer",function(i){var t=i.namespace("IXL");function e(t){this._pauseAfterMS=t.pauseAfterMS,this._ts=new Date(t.initialMS),this._interval=null,t.practiceAgent.on("showNextStep",this.startTimer,this)}e.prototype={TIMER_PAUSED_CSS_CLASSNAME:"timer-paused",TIME_ELAPSED_ID_SELECTOR:"#time-elapsed",startTimer:function(){var t=i.one(this.TIME_ELAPSED_ID_SELECTOR);if(this._nextPauseTime=+new Date+this._pauseAfterMS,null===this._interval){this._lastUpdate=+new Date;var e=this;this._interval=i.config.win.setInterval(function(){e.updateTime()},250),t&&t.removeClass(this.TIMER_PAUSED_CSS_CLASSNAME)}},updateTime:function(){var t=Math.min(+new Date,this._nextPauseTime),e=t-this._lastUpdate;this._lastUpdate=t,this._ts.setMilliseconds(this._ts.getMilliseconds()+e),this.updateUI(),t>=this._nextPauseTime&&this.pauseTimer()},pauseTimer:function(){var t=i.one(this.TIME_ELAPSED_ID_SELECTOR);t&&t.addClass(this.TIMER_PAUSED_CSS_CLASSNAME),i.config.win.clearInterval(this._interval),this._interval=null},updateUI:function(){this.updateTimeElement("#timerhrs",this._ts.getUTCHours()),this.updateTimeElement("#timermin",this._ts.getUTCMinutes()),this.updateTimeElement("#timersec",this._ts.getUTCSeconds())},updateTimeElement:function(t,e){i.one(t)&&(i.one(t).getDOMNode().innerHTML=(e<10?"0":"")+e)}},t.PlayTimer=e},"@VERSION@",{requires:[]});
